{"ast":null,"code":"var _jsxFileName = \"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/src/VideoPlayer/TwilioVideo/VideoChat.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useCallback, useEffect } from 'react';\nimport Video from \"twilio-video\"; //import axiosInstance from '../../axios';\n\nimport axios from 'axios';\nimport Room from './Room';\nimport Lobby from './Lobby';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst VideoChat = () => {\n  _s();\n\n  console.log(\"rerendering\");\n  const [room, setRoom] = useState(null);\n  const [username, setUsername] = useState(\"\");\n  const [roomName, setRoomName] = useState(\"\");\n  const [connecting, setConnecting] = useState(false);\n  const handleUsernameChange = useCallback(event => {\n    setUsername(event.target.value);\n  }, []);\n  const handleRoomNameChange = useCallback(event => {\n    setRoomName(event.target.value);\n  }, []);\n  const [tokenData, setToken] = useState(null);\n  /*\n  const handleSubmit=(e)=>{\n   e.preventDefault();\t   \n   setConnecting(true);\n   console.log(\"submit data\");\n   let susername='bibhu'\n    axios.post(`https://token-service-6908-dev.twil.io/token?identity=${susername}`, {\n   \n   })\n    .then((res) => {\n        setToken(tokenData=>res.data);\n        //console.log(\"token data: \", res.data);\n           \n                })\n    }\n  */\n\n  const handleSubmit = useCallback(async event => {\n    event.preventDefault();\n    setConnecting(true);\n    let susername = 'bibhu';\n    const data = await fetch(`https://token-service-6908-dev.twil.io/token?identity=${susername}`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => res.json());\n    Video.connect(data.token, {\n      name: \"coolroom\"\n    }).then(room => {\n      setConnecting(false);\n      setRoom(room);\n    }).catch(err => {\n      console.error(err);\n      setConnecting(false);\n    });\n  }, [roomName, username]);\n  let render;\n\n  if (room) {\n    render = /*#__PURE__*/_jsxDEV(Room, {\n      roomName: roomName,\n      room: room\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this);\n  } else {\n    render = /*#__PURE__*/_jsxDEV(Lobby, {\n      username: username,\n      roomName: roomName,\n      handleUsernameChange: handleUsernameChange,\n      handleRoomNameChange: handleRoomNameChange,\n      handleSubmit: handleSubmit,\n      connecting: connecting\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this);\n  }\n\n  return render;\n};\n\n_s(VideoChat, \"OrVXvRKg3Uaj0PESJpJJPlVJLMs=\");\n\n_c = VideoChat;\nexport default VideoChat;\n\nvar _c;\n\n$RefreshReg$(_c, \"VideoChat\");","map":{"version":3,"sources":["/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/src/VideoPlayer/TwilioVideo/VideoChat.js"],"names":["React","useState","useCallback","useEffect","Video","axios","Room","Lobby","VideoChat","console","log","room","setRoom","username","setUsername","roomName","setRoomName","connecting","setConnecting","handleUsernameChange","event","target","value","handleRoomNameChange","tokenData","setToken","handleSubmit","preventDefault","susername","data","fetch","method","headers","then","res","json","connect","token","name","catch","err","error","render"],"mappings":"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","sourcesContent":["import React,{useState, useCallback, useEffect} from 'react';\nimport Video from \"twilio-video\";\n//import axiosInstance from '../../axios';\nimport axios from 'axios';\n\nimport Room from './Room';\nimport Lobby from './Lobby';\n\n\nconst VideoChat=()=>{\n\n\n   console.log(\"rerendering\",);\n\n   const [room, setRoom] = useState(null);\n   const [username, setUsername] = useState(\"\");\n   const [roomName, setRoomName] = useState(\"\");\t\n   const [connecting, setConnecting] = useState(false);\n\n   const handleUsernameChange = useCallback((event) => {\n    setUsername(event.target.value);\n   }, []);\n\n   const handleRoomNameChange = useCallback((event) => {\n    setRoomName(event.target.value);\n  }, []);\n\n  const [tokenData, setToken] = useState(null);\n   /*\n   const handleSubmit=(e)=>{\n    e.preventDefault();\t   \n    setConnecting(true);\n    console.log(\"submit data\");\n    let susername='bibhu'\n\n    axios.post(`https://token-service-6908-dev.twil.io/token?identity=${susername}`, {\n    \n    })\n     .then((res) => {\n         setToken(tokenData=>res.data);\n         //console.log(\"token data: \", res.data);\n\n           \n\n                })\n\n\n   }\n  */\n\n    const handleSubmit = useCallback(\n    async (event) => {\n      event.preventDefault();\n      setConnecting(true);\n      let susername='bibhu'\n\n      const data = await fetch(`https://token-service-6908-dev.twil.io/token?identity=${susername}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      }).then((res) => res.json());\n\n\n      Video.connect(data.token, {\n        name: \"coolroom\",\n      })\n        .then((room) => {\n          setConnecting(false);\n          setRoom(room);\n        })\n        .catch((err) => {\n          console.error(err);\n          setConnecting(false);\n        });\n    },\n    [roomName, username]\n  );\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n let render;\n  if (room) {\n    render = (\n      <Room roomName={roomName} room={room}/>\n    );\n  } else {\n    render = (\n      <Lobby\n        username={username}\n        roomName={roomName}\n        handleUsernameChange={handleUsernameChange}\n        handleRoomNameChange={handleRoomNameChange}\n        handleSubmit={handleSubmit}\n        connecting={connecting}\n      />\n    );\n  }\n  return render;\n\n\n\n\n\n\n\n\n\n}\n\n\nexport default VideoChat;\n"]},"metadata":{},"sourceType":"module"}