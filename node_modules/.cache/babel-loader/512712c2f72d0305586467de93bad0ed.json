{"ast":null,"code":"import _defineProperty from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import axiosInstance from'../axios';import{Link}from'react-router-dom';import classes from\"./Login.module.css\";import LoginHeader from\"./LoginHeader\";import LoginFooter from\"./LoginFooter\";import logoImage from'./BWlogo.JPG';//import { useHistory } from \"react-router-dom\";\nimport{changepassword}from'./AllAPICalls';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(props){var initialFormData=Object.freeze({username:'',email:'',password:''});var _useState=useState(initialFormData),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],updateFormData=_useState2[1];var _useState3=useState({borderColor:\"lightgrey\",borderWidth:\"1px\"}),_useState4=_slicedToArray(_useState3,2),fieldColor=_useState4[0],setFieldColor=_useState4[1];var handleChange=function handleChange(e){updateFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value.trim())));};var handleSubmit=function handleSubmit(e){e.preventDefault();console.log(formData);axiosInstance.post(\"token/\",{username:formData.username,password:\"OLsbd!@#45\"+formData.password}).then(function(res){localStorage.setItem('access_token',res.data.access);localStorage.setItem('refresh_token',res.data.refresh);axiosInstance.defaults.headers['Authorization']='JWT '+localStorage.getItem('access_token');props.setLoggedIn(true);//history.push('/');\n//console.log(res);\n//console.log(res.data);\n});};var mouseOver=function mouseOver(){setFieldColor({borderColor:\"var(--themeColor)\",borderWidth:\"1px\"});};var mouseLeave=function mouseLeave(){setFieldColor({borderColor:\"lightgrey\",borderWidth:\"1px\"});};var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showOTPspace=_useState6[0],setShowOTPspace=_useState6[1];var handleSubmitGetOTP=function handleSubmitGetOTP(e){e.preventDefault();changepassword({formData:formData});setShowOTPspace(true);};return/*#__PURE__*/_jsxs(\"div\",{className:classes.loginDiv,children:[/*#__PURE__*/_jsx(LoginHeader,{}),/*#__PURE__*/_jsxs(\"div\",{className:classes.middleDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.middleDiv_logo,children:[/*#__PURE__*/_jsx(\"img\",{className:classes.bwLogo,src:logoImage,alt:\"edr Logo\"}),/*#__PURE__*/_jsx(\"i\",{className:classes.edrTitleText,children:\"edresearch.in\"})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.middleDiv_title,children:\"  Sign in : Request OTP\"}),!showOTPspace&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmitGetOTP,className:classes.loginForm,children:[/*#__PURE__*/_jsx(\"input\",{onMouseOver:mouseOver,onMouseLeave:mouseLeave,style:fieldColor,type:\"text\",onChange:handleChange,name:\"username\",className:classes.email_field,placeholder:\"Enter your phone number\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:classes.submit_button,children:\"NEXT \"})]}),showOTPspace&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:classes.loginForm,children:[/*#__PURE__*/_jsx(\"input\",{onMouseOver:mouseOver,onMouseLeave:mouseLeave,style:fieldColor,type:\"password\",onChange:handleChange,name:\"password\",className:classes.password_field,placeholder:\" _   _   _   _\",autoComplete:\"on\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:classes.submit_button,children:\"SIGN IN \"})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.accountUtilInfo,children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:classes.accountUtilInfo_text,children:\"Dont have an account? Sign Up\"})})]}),/*#__PURE__*/_jsx(LoginFooter,{})]});};export default Login;","map":{"version":3,"sources":["/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/src/CommonApps/Login.js"],"names":["React","useState","axiosInstance","Link","classes","LoginHeader","LoginFooter","logoImage","changepassword","Login","props","initialFormData","Object","freeze","username","email","password","formData","updateFormData","borderColor","borderWidth","fieldColor","setFieldColor","handleChange","e","target","name","value","trim","handleSubmit","preventDefault","console","log","post","then","res","localStorage","setItem","data","access","refresh","defaults","headers","getItem","setLoggedIn","mouseOver","mouseLeave","showOTPspace","setShowOTPspace","handleSubmitGetOTP","loginDiv","middleDiv","middleDiv_logo","bwLogo","edrTitleText","middleDiv_title","loginForm","email_field","submit_button","password_field","accountUtilInfo","accountUtilInfo_text"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport axiosInstance from '../axios';\nimport { Link } from 'react-router-dom';\nimport classes from \"./Login.module.css\"\nimport LoginHeader from \"./LoginHeader\";\nimport LoginFooter from \"./LoginFooter\";\nimport logoImage from './BWlogo.JPG'\n//import { useHistory } from \"react-router-dom\";\n\nimport {changepassword} from './AllAPICalls'\nconst Login =(props)=> {\n\n   \n\n   const initialFormData = Object.freeze({\n\t        username:'',\n\t\temail: '',\n\t\tpassword: '',\n\t});\n\n   const [formData, updateFormData] = useState(initialFormData);\n\n\n   const [fieldColor, setFieldColor] = useState({borderColor: \"lightgrey\",borderWidth:\"1px\"});\n\n\n   const handleChange = (e) => {\n\t\tupdateFormData({\n\t\t\t...formData,\n\t\t\t[e.target.name]: e.target.value.trim(),\n\t\t});\n\t};\n\n\n\tconst handleSubmit = (e) => {\n\t\te.preventDefault();\n\t\tconsole.log(formData);\n\n\t\taxiosInstance.post(`token/`, {username: formData.username,password: \"OLsbd!@#45\"+formData.password,})\n\t\t\t.then((res) => {\n\t\t\t\tlocalStorage.setItem('access_token', res.data.access);\n\t\t\t\tlocalStorage.setItem('refresh_token', res.data.refresh);\n\t\t\t\taxiosInstance.defaults.headers['Authorization'] =\n\t\t\t\t\t'JWT ' + localStorage.getItem('access_token');\n\t\t\t\tprops.setLoggedIn(true);\n\t\t\t\t//history.push('/');\n\t\t\t\t//console.log(res);\n\t\t\t\t//console.log(res.data);\n\t\t\t});\n\t};   \n\n\n   const mouseOver=()=>{\n\n   setFieldColor({borderColor: \"var(--themeColor)\",borderWidth:\"1px\"});\n\n   }\n\n   const mouseLeave=()=>{\n\n   setFieldColor({borderColor: \"lightgrey\",borderWidth:\"1px\"});\n\n   }\n\n\n\n  const [showOTPspace, setShowOTPspace]= useState(false);\n\n\n\n   const handleSubmitGetOTP=(e)=>{\n    e.preventDefault();\n    changepassword({formData});\n    setShowOTPspace(true);\n\n\n   } \n\n\n\n\n\n\n\n\nreturn (\n\n\n\n<div className={classes.loginDiv}>\n\n  <LoginHeader/>\n\n  <div className={classes.middleDiv}>\n\n     <div className={classes.middleDiv_logo}>  \n        <img  className={classes.bwLogo} src={logoImage} alt='edr Logo' />\n\t<i className={classes.edrTitleText}>edresearch.in</i>\n\n     </div>\n\n     <div className={classes.middleDiv_title}>  Sign in : Request OTP</div>\n\n     { !showOTPspace &&\n     <form onSubmit={handleSubmitGetOTP} className={classes.loginForm}>\n          <input  \n\t     onMouseOver={mouseOver}  \n\t     onMouseLeave={mouseLeave}\n\t     style={fieldColor} \n\t     type=\"text\" \n\t     onChange={handleChange} \n\t     name=\"username\" \n\t     className={classes.email_field} \n\t     placeholder=\"Enter your phone number\" \n\t\n\t  />\n\n\t  {/*\n          <input  \n\t     onMouseOver={mouseOver} \n\t     onMouseLeave={mouseLeave}\n\t     style={fieldColor} \n\t     type=\"password\" \n\t     onChange={handleChange} \n\t     name=\"password\"  \n\t     className={classes.password_field} \n\t     placeholder=\"Password\"\n\t     autoComplete=\"on\"\n\t  />\n\t  */}\n\n          <button type=\"submit\"  className= {classes.submit_button}>NEXT </button>\n     </form>\n    }\n    { showOTPspace &&\n\n        <form onSubmit={handleSubmit} className={classes.loginForm}>\n          <input  \n             onMouseOver={mouseOver} \n             onMouseLeave={mouseLeave}\n             style={fieldColor} \n             type=\"password\" \n             onChange={handleChange} \n             name=\"password\"  \n             className={classes.password_field} \n             placeholder=\" _   _   _   _\"\n             autoComplete=\"on\"\n          />\n\n         <button type=\"submit\"  className= {classes.submit_button}>SIGN IN </button>\n\n        </form>\n    }\n\n\n\n\n\n\n\n      <div className={classes.accountUtilInfo}>\n\t{/*\n\t<Link to=\"/\" className={classes.accountUtilInfo_text}> Forgot password?</Link>  \n\t*/}\n\t<Link to=\"/\"className={classes.accountUtilInfo_text}>Dont have an account? Sign Up</Link>   \n      </div>\n\n\n    \n\n  </div>\n\n\n  <LoginFooter/>\n\n\n</div>\n\n\n\n\n\n);\n\n\n\n\n\n\n}\n\nexport default Login;\n\n\n"]},"metadata":{},"sourceType":"module"}