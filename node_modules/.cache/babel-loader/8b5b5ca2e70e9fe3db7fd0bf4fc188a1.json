{"ast":null,"code":"import _defineProperty from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,CSSProperties}from\"react\";import LoginHeader from\"./LoginHeader\";import classes from'./Register.module.css';//import {OptionField} from './OptionField';\nimport{createaccountwithmobileno,checkuserexist}from'./AllAPICalls';import FadeLoader from\"react-spinners/FadeLoader\";import{BsCheckLg}from'react-icons/bs';//import { useHistory } from \"react-router-dom\";\nimport Login from'./LoginNew';import basewebURL from'../basewebURL';import ReCAPTCHA from'react-google-recaptcha';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var override={display:\"block\",margin:\"0 auto\",borderColor:\"red\"};var Register=function Register(){var _useState=useState(\"notcreated\"),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];//const history = useHistory(); \t\nvar color=\"var(--themeColor);\";var initialFormData=Object.freeze({username:'',usertype:'',usernamelength:8});var _useState3=useState(initialFormData),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],updateFormData=_useState4[1];var _useState5=useState({color:'grey',backgroundColor:'lightgrey'}),_useState6=_slicedToArray(_useState5,2),buttonStyle=_useState6[0],setButtonStyle=_useState6[1];var handleChangeUserName=function handleChangeUserName(event){updateFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},event.target.name,event.target.value.trim())));if(event.target.value.length===10){setButtonStyle({color:'white',backgroundColor:'var(--themeColor)'});}else{setButtonStyle({color:'grey',backgroundColor:'lightgrey'});}};var handleChangeUserType=function handleChangeUserType(event){updateFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},event.target.name,event.target.value.trim())));};var handleSubmit=function handleSubmit(){if(formData.username.length!==10){alert(\"Enter a 10 digit number\");}if(formData.usertype===\"\"){alert(\"Please select usertype\");}if(userExists){alert(\"Try a different number\");}if(!captchaResult){alert(\"Check the captcha\");}if(formData.username.length===10&&!userExists&&formData.usertype!==\"\"&&captchaResult){formData['username']=\"+91\"+formData.username;setLoading(function(loading){return\"creating\";});createaccountwithmobileno({formData:formData,setLoading:setLoading});}};var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),userExists=_useState8[0],setUserExists=_useState8[1];useEffect(function(){var username=\"+91\"+formData.username;checkuserexist({setUserExists:setUserExists,username:username});},[formData.username]);//let classRank=[\"+91\",\"+353\",\"+49\"]\n//<OptionField handleChange={handleChange}  label=\"+91\" name=\"countrycode\"  options={classRank}/>\nvar _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),login=_useState10[0],setLogin=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),loggedIn=_useState12[0],setLoggedIn=_useState12[1];var handleRedirectLogin=function handleRedirectLogin(){//history.push(`/dashboard/general/`);\nsetLogin(true);};var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),captchaResult=_useState14[0],setCaptchaResult=_useState14[1];var onChangeCaptchaHandler=function onChangeCaptchaHandler(value){//console.log('Captcha value:', value);\nfetch(\"\".concat(basewebURL,\"/api/verifycaptcha/\"),{method:'POST',body:JSON.stringify({'captcha_value':value}),headers:{'Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(data){//console.log(\"captcha value: \",data.captcha.success)\nsetCaptchaResult(data.captcha.success);});};var TnSHandler=function TnSHandler(){window.open(\"https://diracai.com/terms-conditions/\",\"_blank\");};var privacyHandler=function privacyHandler(){window.open(\"https://diracai.com/privacy-policy/\",\"_blank\");};return/*#__PURE__*/_jsxs(\"div\",{className:classes.registerParent,children:[!login&&/*#__PURE__*/_jsx(LoginHeader,{}),loading===\"creating\"&&/*#__PURE__*/_jsxs(\"div\",{className:classes.registerDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.titleDiv,children:[\" \",/*#__PURE__*/_jsx(\"h2\",{children:\"Creating ... \"}),\" \"]}),/*#__PURE__*/_jsx(\"div\",{style:{margin:'auto'},children:/*#__PURE__*/_jsx(FadeLoader,{color:color,loading:true,css:override,size:50})})]}),loading===\"created\"&&!login&&/*#__PURE__*/_jsxs(\"div\",{className:classes.registerDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.titleDiv,children:[\" \",/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(BsCheckLg,{style:{color:\"green\"}}),\" Account created successfully! \"]}),\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:classes.submitButtonDiv,children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:handleRedirectLogin,className:classes.sendOTPButton,style:buttonStyle,children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Proceed to Login\"}),\"  \"]})})]}),login&&/*#__PURE__*/_jsx(Login,{setLoggedIn:setLoggedIn,loadedUsername:formData.username}),loading===\"notcreated\"&&/*#__PURE__*/_jsxs(\"div\",{className:classes.registerDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.titleDiv,children:[\" \",/*#__PURE__*/_jsx(\"h2\",{children:\"Create an account\"}),\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:classes.switchMethodDiv,children:\"  \"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.phoneNumberDiv,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.phonetitle,children:\"Enter mobile number \"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.enterPhoneDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.countryCodes,children:[/*#__PURE__*/_jsx(\"img\",{alt:\"India\",className:classes.inflag,src:\"https://purecatamphetamine.github.io/country-flag-icons/3x2/IN.svg\"}),/*#__PURE__*/_jsx(\"i\",{children:\" +91\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:handleChangeUserName,name:\"username\",placeholder:\"Enter mobile number\",className:classes.usernameInput})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.phonetnc,children:/*#__PURE__*/_jsxs(\"span\",{children:[\" By continuing, you agree to our\",/*#__PURE__*/_jsx(\"span\",{style:{color:\"var(--themeColor)\",cursor:\"pointer\"},onClick:TnSHandler,children:\" Terms of Service \"}),\"and  \",/*#__PURE__*/_jsx(\"span\",{style:{color:\"var(--themeColor)\",cursor:\"pointer\"},onClick:privacyHandler,children:\" Privacy Policy \"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.switchMethodDiv,style:{color:\"red\"},children:[\" \",userExists?\"user with this number already exists\":\"\",\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.usertypeDiv,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.chooseUserTypeTitle,children:\" Choose your role  \"}),/*#__PURE__*/_jsx(\"div\",{className:classes.userTypeOptions,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.userTypeOptionsInner,children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"1\",name:\"usertype\",className:classes.radioButton,onChange:handleChangeUserType}),\"Teacher\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"2\",name:\"usertype\",className:classes.radioButton,onChange:handleChangeUserType}),\"Student\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"3\",name:\"usertype\",className:classes.radioButton,onChange:handleChangeUserType}),\"Owner/Manager\"]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.submitButtonDiv,children:/*#__PURE__*/_jsx(ReCAPTCHA,{sitekey:\"6LdtMAghAAAAAGLqRpJ0hMuAWK4X15_zQfbvBuX-\",onChange:onChangeCaptchaHandler})}),/*#__PURE__*/_jsx(\"div\",{className:classes.submitButtonDiv,children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:handleSubmit,className:classes.sendOTPButton,style:buttonStyle,children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Create\"}),\"  \"]})})]})]});};export default Register;","map":{"version":3,"sources":["/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/src/CommonApps/Register.js"],"names":["React","useState","useEffect","CSSProperties","LoginHeader","classes","createaccountwithmobileno","checkuserexist","FadeLoader","BsCheckLg","Login","basewebURL","ReCAPTCHA","axios","override","display","margin","borderColor","Register","loading","setLoading","color","initialFormData","Object","freeze","username","usertype","usernamelength","formData","updateFormData","backgroundColor","buttonStyle","setButtonStyle","handleChangeUserName","event","target","name","value","trim","length","handleChangeUserType","handleSubmit","alert","userExists","captchaResult","setUserExists","login","setLogin","loggedIn","setLoggedIn","handleRedirectLogin","setCaptchaResult","onChangeCaptchaHandler","fetch","method","body","JSON","stringify","headers","then","res","json","data","captcha","success","TnSHandler","window","open","privacyHandler","registerParent","registerDiv","titleDiv","submitButtonDiv","sendOTPButton","switchMethodDiv","phoneNumberDiv","phonetitle","enterPhoneDiv","countryCodes","inflag","usernameInput","phonetnc","cursor","usertypeDiv","chooseUserTypeTitle","userTypeOptions","userTypeOptionsInner","radioButton"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, CSSProperties } from \"react\";\nimport LoginHeader from \"./LoginHeader\";\nimport classes from './Register.module.css';\n//import {OptionField} from './OptionField';\nimport {createaccountwithmobileno, checkuserexist} from './AllAPICalls';\nimport FadeLoader from \"react-spinners/FadeLoader\";\nimport {BsCheckLg} from 'react-icons/bs';\n//import { useHistory } from \"react-router-dom\";\n\nimport Login from './LoginNew';\nimport basewebURL from '../basewebURL';\nimport ReCAPTCHA from 'react-google-recaptcha';\nimport axios from 'axios';\n\n\nconst override: CSSProperties = {\n  display: \"block\",\n  margin: \"0 auto\",\n  borderColor: \"red\",\n};\n\n\nconst Register=()=>{\n\n\n    const [loading, setLoading] = useState(\"notcreated\");\n    //const history = useHistory(); \t\n    let color=\"var(--themeColor);\";\n    const initialFormData = Object.freeze({\n                username:'',\n                usertype: '',\n\t        usernamelength:8\n        });\n\n    const [formData, updateFormData] = useState(initialFormData);\n\n    const [buttonStyle, setButtonStyle]= useState({\n      color:'grey',\n      backgroundColor:'lightgrey'\t    \n\n    });\n\n    const handleChangeUserName = (event) => {\n        \n        updateFormData({\n                        ...formData,\n                        [event.target.name]: event.target.value.trim(),\n                });\n\n\n        if(event.target.value.length===10){\n           setButtonStyle({\n            color:'white',\n            backgroundColor:'var(--themeColor)'\n\t   });     \n\t}else{\n\n          setButtonStyle({\n              color:'grey',\n              backgroundColor:'lightgrey'\n             });\n\n\t}\n\n    }\n\n    \n    const handleChangeUserType = (event) => {\n\n     updateFormData({\n                        ...formData,\n                        [event.target.name]: event.target.value.trim(),\n                });\n\n    }\n\n\n    const handleSubmit=()=>{\n\n       if(formData.username.length !==10){ \t   \n          alert(\"Enter a 10 digit number\");\n       }\n\n\n       if(formData.usertype===\"\"){\n         alert(\"Please select usertype\");\n       }\n\n       if(userExists){\n          alert(\"Try a different number\");\t   \n       }\n\n       if(!captchaResult){\n        alert(\"Check the captcha\");\n\n       }\n\n       if(formData.username.length ===10 && !userExists && formData.usertype !==\"\" && captchaResult){\n           formData['username']= \"+91\"+formData.username;\t \n           setLoading(loading=>\"creating\");\n           createaccountwithmobileno({formData, setLoading});\n       }\n    }\n\n\n\n    const [userExists, setUserExists] = useState(false);\n      \n       useEffect(()=>{\n          let username = \"+91\"+formData.username;\t   \n          checkuserexist({setUserExists,username });\n\n       },[formData.username]);\n       \n\n    //let classRank=[\"+91\",\"+353\",\"+49\"]\n    //<OptionField handleChange={handleChange}  label=\"+91\" name=\"countrycode\"  options={classRank}/>\n    const [login, setLogin] = useState(false);\n    const [loggedIn, setLoggedIn] = useState(false);\n\n    const handleRedirectLogin=()=>{     \t    \n     //history.push(`/dashboard/general/`);\n     setLogin(true);\n\n    }\n\n    const [captchaResult, setCaptchaResult] = useState();\n\n    const onChangeCaptchaHandler=(value)=>{\n\n    //console.log('Captcha value:', value);\n    \n\n    fetch(`${basewebURL}/api/verifycaptcha/`, {\n         method: 'POST',\n         body: JSON.stringify({ 'captcha_value': value }),\n         headers: { 'Content-Type': 'application/json' }\n       })\n        .then(res => res.json())\n        .then(data => {\n          //console.log(\"captcha value: \",data.captcha.success)\n          setCaptchaResult(data.captcha.success)\n        }) \n\n\n    }\n\n\n    const TnSHandler=()=>{\n\n      window.open(\"https://diracai.com/terms-conditions/\", \"_blank\");\n\n    }\n\n\n    const privacyHandler=()=>{\n\n      window.open(\"https://diracai.com/privacy-policy/\", \"_blank\");\n\n    }\n\n\n\n\nreturn (\n\n<div className={classes.registerParent}>\n \n  { !login &&  \n  <LoginHeader/>\n  }\n\n\n     { loading===\"creating\" &&  \n          <div className={classes.registerDiv}>\n\t       <div className={classes.titleDiv}> <h2>Creating ... </h2> </div>\n\t       <div style={{margin:'auto'}}>\n                   <FadeLoader color={color} loading={true} css={override} size={50}   />\n\t       </div>\n          </div>\n    }\n\n\n\n   { loading ===\"created\" && !login &&\n\n      <div className={classes.registerDiv}>\n\n           <div className={classes.titleDiv}> <h2><BsCheckLg style={{color:\"green\"}}/> Account created successfully! </h2> </div>\n\n\n            <div className={classes.submitButtonDiv}>\n\n                <button type=\"button\" onClick={handleRedirectLogin} className={classes.sendOTPButton} style={buttonStyle}> <b>Proceed to Login</b>  </button>\n\n            </div>\n\n\n\n      </div>\n\n   }\n\n\n   { login &&\n\n     <Login setLoggedIn={setLoggedIn} loadedUsername={formData.username}/>\n\n   }\n\n\n\n\n\n  { loading===\"notcreated\" && \n  <div className={classes.registerDiv}>\n\n\n    <div className={classes.titleDiv}> <h2>Create an account</h2> </div>\n\n    <div className={classes.switchMethodDiv}>  </div>\n\n    <div className={classes.phoneNumberDiv}>\n      <div className={classes.phonetitle}>Enter mobile number </div>\n\n      <div className={classes.enterPhoneDiv}>\n\n          <div className={classes.countryCodes}>\n            \n            <img\n               alt=\"India\"\n\t       className={classes.inflag}\n               src=\"https://purecatamphetamine.github.io/country-flag-icons/3x2/IN.svg\"/>\n               <i> +91</i> \n\n\t  </div> \n\n           <input\n             type=\"number\"\n             onChange={handleChangeUserName}\n             name=\"username\"\n             placeholder=\"Enter mobile number\"\n             className={classes.usernameInput}\n          />\n\n\n\n      </div>\n\n      <div className={classes.phonetnc}>\n\t\t <span> By continuing, you agree to our  \n\t\t                  <span style={{color:\"var(--themeColor)\", cursor: \"pointer\"}} onClick={TnSHandler}> Terms of Service </span>  \n\t\t             and  <span style={{color:\"var(--themeColor)\", cursor: \"pointer\"}} onClick={privacyHandler}> Privacy Policy </span>\n\t\t  </span>\n      </div>\t\n    </div>\n\n    <div className={classes.switchMethodDiv} style={{color:\"red\"}}> {userExists? \"user with this number already exists\": \"\"} </div>\t\t  \n\n    <div className={classes.usertypeDiv}> \n        <div className={classes.chooseUserTypeTitle}> Choose your role  </div>\n\n        <div className={classes.userTypeOptions}>\n\t   <div className={classes.userTypeOptionsInner}>\n\n             <span><input type=\"radio\" value=\"1\" name=\"usertype\" className={classes.radioButton} onChange={handleChangeUserType}/> \n\t         Teacher\n\t     </span>\n             <span><input type=\"radio\" value=\"2\" name=\"usertype\" className={classes.radioButton} onChange={handleChangeUserType}/> \n\t        Student\n\t     </span>\n             <span><input type=\"radio\" value=\"3\" name=\"usertype\" className={classes.radioButton} onChange={handleChangeUserType}/> \n\t        Owner/Manager\n\t     </span>\n\n           </div>\n\t</div> \n\n    </div>\n\n    <div className={classes.submitButtonDiv}>\n      <ReCAPTCHA\n          sitekey=\"6LdtMAghAAAAAGLqRpJ0hMuAWK4X15_zQfbvBuX-\"\n          onChange={onChangeCaptchaHandler}\n        />\n    </div>\n\n\n\n    <div className={classes.submitButtonDiv}>\n\n      <button type=\"button\" onClick={handleSubmit} className={classes.sendOTPButton} style={buttonStyle}> <b>Create</b>  </button>\n\n    </div>\n\n\n\n  </div>\n\n\n  }\n\n\n\n</div>\n\n);\n\n}\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}