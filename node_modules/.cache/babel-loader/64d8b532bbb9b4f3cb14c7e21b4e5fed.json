{"ast":null,"code":"import _defineProperty from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,CSSProperties,useRef}from'react';import axiosInstance from'../axios';import{Link}from'react-router-dom';//import classes from \"./Login.module.css\"\nimport classes from'./Register.module.css';import LoginHeader from\"./LoginHeader\";import LoginFooter from\"./LoginFooter\";import logoImage from'./BWlogo.JPG';//import { useHistory } from \"react-router-dom\";\nimport{changepassword}from'./AllAPICalls';import FadeLoader from\"react-spinners/FadeLoader\";import OTPinputUnit from'./OTPinputUnit';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var override={display:\"block\",margin:\"0 auto\",borderColor:\"red\"};var useFocus=function useFocus(){var htmlElRef=useRef(null);var setFocus=function setFocus(){htmlElRef.current&&htmlElRef.current.focus();};return[htmlElRef,setFocus];};var Login=function Login(props){var color=\"var(--themeColor);\";var initialFormData=Object.freeze({username:'',email:'',password:''});var _useState=useState(initialFormData),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],updateFormData=_useState2[1];var _useState3=useState({borderColor:\"lightgrey\",borderWidth:\"1px\"}),_useState4=_slicedToArray(_useState3,2),fieldColor=_useState4[0],setFieldColor=_useState4[1];var _useState5=useState({color:'grey',backgroundColor:'lightgrey'}),_useState6=_slicedToArray(_useState5,2),buttonStyle=_useState6[0],setButtonStyle=_useState6[1];var _useState7=useState({color:'grey',backgroundColor:'lightgrey'}),_useState8=_slicedToArray(_useState7,2),buttonStyleOTP=_useState8[0],setButtonStyleOTP=_useState8[1];var _useState9=useState(\"OTPnotrequested\"),_useState10=_slicedToArray(_useState9,2),loginState=_useState10[0],setLoginState=_useState10[1];var _useFocus=useFocus(),_useFocus2=_slicedToArray(_useFocus,2),inputRef1=_useFocus2[0],setInputFocus1=_useFocus2[1];var _useFocus3=useFocus(),_useFocus4=_slicedToArray(_useFocus3,2),inputRef2=_useFocus4[0],setInputFocus2=_useFocus4[1];var _useFocus5=useFocus(),_useFocus6=_slicedToArray(_useFocus5,2),inputRef3=_useFocus6[0],setInputFocus3=_useFocus6[1];var _useFocus7=useFocus(),_useFocus8=_slicedToArray(_useFocus7,2),inputRef4=_useFocus8[0],setInputFocus4=_useFocus8[1];var _useFocus9=useFocus(),_useFocus10=_slicedToArray(_useFocus9,2),inputRef5=_useFocus10[0],setInputFocus5=_useFocus10[1];var handleChange=function handleChange(e){updateFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value.trim())));};var handleChangeUserName=function handleChangeUserName(event){updateFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},event.target.name,event.target.value.trim())));console.log(\"Value: \",event.target.value.length);if(event.target.value.length===10){setButtonStyle({color:'white',backgroundColor:'var(--themeColor)'});}else{setButtonStyle({color:'grey',backgroundColor:'lightgrey'});}};var handleSubmitOTP=function handleSubmitOTP(e){e.preventDefault();console.log(formData);if(!(\"first\"in formData&&formData.first!==\"\")||!(\"second\"in formData&&formData.second!==\"\")||!(\"third\"in formData&&formData.third!==\"\")||!(\"fourth\"in formData&&formData.fourth!==\"\")||!(\"fifth\"in formData&&formData.fifth!==\"\")){alert(\"fill all the boxes \");}formData[\"password\"]=String(formData.first)+String(formData.second)+String(formData.third)+String(formData.fourth)+String(formData.fifth);axiosInstance.post(\"token/\",{username:formData.username,password:\"OLsbd!@#45\"+formData.password}).then(function(res){localStorage.setItem('access_token',res.data.access);localStorage.setItem('refresh_token',res.data.refresh);axiosInstance.defaults.headers['Authorization']='JWT '+localStorage.getItem('access_token');props.setLoggedIn(true);//history.push('/');\n//console.log(res);\n//console.log(res.data);\n});};var mouseOver=function mouseOver(){setFieldColor({borderColor:\"var(--themeColor)\",borderWidth:\"1px\"});};var mouseLeave=function mouseLeave(){setFieldColor({borderColor:\"lightgrey\",borderWidth:\"1px\"});};var handleSubmitGetOTP=function handleSubmitGetOTP(e){e.preventDefault();if(formData.username.length!==10){alert(\"Enter a 10 digit number\");}formData[\"username\"]=\"+91\"+formData.username;setLoginState(function(loginState){return\"OTPsending\";});changepassword({formData:formData,setLoginState:setLoginState});};var otpArr=[];var handleChangeOTP=function handleChangeOTP(e){updateFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value.trim())));//setInputFocus();\nif(e.target.name===\"first\"){setInputFocus2();}if(e.target.name===\"second\"){setInputFocus3();}if(e.target.name===\"third\"){setInputFocus4();}if(e.target.name===\"fourth\"){setInputFocus5();}console.log(\"otpArr: \",otpArr);if(e.target.name===\"fifth\"){setButtonStyleOTP({color:'white',backgroundColor:'var(--themeColor)'});}};console.log(\"formData: \",formData);return/*#__PURE__*/_jsxs(\"div\",{className:classes.registerParent,children:[/*#__PURE__*/_jsx(LoginHeader,{}),loginState===\"OTPsending\"&&/*#__PURE__*/_jsxs(\"div\",{className:classes.registerDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.titleDiv,children:[\" \",/*#__PURE__*/_jsx(\"h2\",{children:\"Sending OTP ... \"}),\" \"]}),/*#__PURE__*/_jsx(\"div\",{style:{margin:'auto'},children:/*#__PURE__*/_jsx(FadeLoader,{color:color,loading:true,css:override,size:50})})]}),loginState===\"OTPnotrequested\"&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:classes.registerDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.titleDiv,children:[\" \",/*#__PURE__*/_jsx(\"h2\",{children:\" Login \"}),\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:classes.switchMethodDiv,children:\"  \"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.phoneNumberDiv,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.phonetitle,children:\"Enter mobile number \"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.enterPhoneDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.countryCodes,children:[/*#__PURE__*/_jsx(\"img\",{alt:\"India\",className:classes.inflag,src:\"http://purecatamphetamine.github.io/country-flag-icons/3x2/IN.svg\"}),/*#__PURE__*/_jsx(\"i\",{children:\" +91\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",max:\"9\",min:\"0\",onChange:handleChangeUserName,name:\"username\",placeholder:\"Enter mobile number\",className:classes.usernameInput})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.phonetnc,children:\"By continuing, you agree to our  Terms of Service  and  Privacy Policy  \"})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.submitButtonDiv,children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:handleSubmitGetOTP,className:classes.sendOTPButton,style:buttonStyle,children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Send OTP\"}),\"  \"]})})]})}),loginState===\"OTPsent\"&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:classes.registerDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.titleDiv,children:[\" \",/*#__PURE__*/_jsx(\"h2\",{children:\" Login \"}),\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:classes.switchMethodDiv,children:\"  \"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.phoneNumberDiv,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.phonetitle,children:\"Enter OTP \"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.enterOTPDiv,children:[/*#__PURE__*/_jsx(OTPinputUnit,{handleChangeOTP:handleChangeOTP,name:\"first\",inputRef:inputRef1}),/*#__PURE__*/_jsx(OTPinputUnit,{handleChangeOTP:handleChangeOTP,name:\"second\",inputRef:inputRef2}),/*#__PURE__*/_jsx(OTPinputUnit,{handleChangeOTP:handleChangeOTP,name:\"third\",inputRef:inputRef3}),/*#__PURE__*/_jsx(OTPinputUnit,{handleChangeOTP:handleChangeOTP,name:\"fourth\",inputRef:inputRef4}),/*#__PURE__*/_jsx(OTPinputUnit,{handleChangeOTP:handleChangeOTP,name:\"fifth\",inputRef:inputRef5})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.phonetnc,children:\"By continuing, you agree to our  Terms of Service  and  Privacy Policy  \"})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.submitButtonDiv,children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:handleSubmitOTP,className:classes.sendOTPButton,style:buttonStyleOTP,children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Submit OTP\"}),\"  \"]})})]})})]});};export default Login;","map":{"version":3,"sources":["/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/src/CommonApps/LoginNew.js"],"names":["React","useState","CSSProperties","useRef","axiosInstance","Link","classes","LoginHeader","LoginFooter","logoImage","changepassword","FadeLoader","OTPinputUnit","override","display","margin","borderColor","useFocus","htmlElRef","setFocus","current","focus","Login","props","color","initialFormData","Object","freeze","username","email","password","formData","updateFormData","borderWidth","fieldColor","setFieldColor","backgroundColor","buttonStyle","setButtonStyle","buttonStyleOTP","setButtonStyleOTP","loginState","setLoginState","inputRef1","setInputFocus1","inputRef2","setInputFocus2","inputRef3","setInputFocus3","inputRef4","setInputFocus4","inputRef5","setInputFocus5","handleChange","e","target","name","value","trim","handleChangeUserName","event","console","log","length","handleSubmitOTP","preventDefault","first","second","third","fourth","fifth","alert","String","post","then","res","localStorage","setItem","data","access","refresh","defaults","headers","getItem","setLoggedIn","mouseOver","mouseLeave","handleSubmitGetOTP","otpArr","handleChangeOTP","registerParent","registerDiv","titleDiv","switchMethodDiv","phoneNumberDiv","phonetitle","enterPhoneDiv","countryCodes","inflag","usernameInput","phonetnc","submitButtonDiv","sendOTPButton","enterOTPDiv"],"mappings":"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","sourcesContent":["import React, { useState,CSSProperties, useRef } from 'react';\nimport axiosInstance from '../axios';\nimport { Link } from 'react-router-dom';\n//import classes from \"./Login.module.css\"\n\nimport classes from './Register.module.css';\n\nimport LoginHeader from \"./LoginHeader\";\nimport LoginFooter from \"./LoginFooter\";\nimport logoImage from './BWlogo.JPG'\n//import { useHistory } from \"react-router-dom\";\n\nimport {changepassword} from './AllAPICalls';\nimport FadeLoader from \"react-spinners/FadeLoader\";\n\nimport OTPinputUnit from './OTPinputUnit';\n\n\n\nconst override: CSSProperties = {\n  display: \"block\",\n  margin: \"0 auto\",\n  borderColor: \"red\",\n};\n\n\n\n\n\n\nconst useFocus = () => {\n    const htmlElRef = useRef(null)\n    const setFocus = () => {htmlElRef.current &&  htmlElRef.current.focus()}\n\n    return [ htmlElRef, setFocus ] \n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst Login =(props)=> {\n\n   \n   let color=\"var(--themeColor);\";\n   const initialFormData = Object.freeze({\n\t        username:'',\n\t\temail: '',\n\t\tpassword: '',\n\t});\n\n   const [formData, updateFormData] = useState(initialFormData);\n\n\n   const [fieldColor, setFieldColor] = useState({borderColor: \"lightgrey\",borderWidth:\"1px\"});\n\n\n\n   const [buttonStyle, setButtonStyle]= useState({\n      color:'grey',\n      backgroundColor:'lightgrey'\n\n    });\n\n\n   const [buttonStyleOTP, setButtonStyleOTP]= useState({\n      color:'grey',\n      backgroundColor:'lightgrey'\n\n    });\n\n\n\n\n\n\n   const [loginState, setLoginState] = useState(\"OTPnotrequested\");\n\n   const [inputRef1, setInputFocus1] = useFocus();\n   const [inputRef2, setInputFocus2] = useFocus();\n   const [inputRef3, setInputFocus3] = useFocus();\n   const [inputRef4, setInputFocus4] = useFocus();\n   const [inputRef5, setInputFocus5] = useFocus();\t\n\n\n   const handleChange = (e) => {\n\t\tupdateFormData({\n\t\t\t...formData,\n\t\t\t[e.target.name]: e.target.value.trim(),\n\t\t});\n\t};\n\n\n\n   const handleChangeUserName = (event) => {\n\n        updateFormData({\n                        ...formData,\n                        [event.target.name]: event.target.value.trim(),\n                });\n\n\n        console.log(\"Value: \", event.target.value.length);\n\n        if(event.target.value.length===10){\n           setButtonStyle({\n            color:'white',\n            backgroundColor:'var(--themeColor)'\n           });\n        }else{\n        setButtonStyle({\n            color:'grey',\n            backgroundColor:'lightgrey'\n           });\n\n        }\n\n    }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\tconst handleSubmitOTP = (e) => {\n\t\te.preventDefault();\n\t\tconsole.log(formData);\n\n               if( \n\t\t  !((\"first\" in formData) && (formData.first !==\"\")) ||\n                  !((\"second\" in formData) && (formData.second !==\"\") )||\n\t\t  !((\"third\" in formData) && (formData.third !==\"\"))||\n\t\t  !((\"fourth\" in formData) && (formData.fourth !==\"\"))||\n\t\t  !((\"fifth\" in formData) && (formData.fifth !==\"\"))     \n\n\t         ){alert(\"fill all the boxes \");} \n                \n \n\t\t formData[\"password\"]= String(formData.first)+String(formData.second)+String(formData.third)+String(formData.fourth)+String(formData.fifth);\n\n\n\t\taxiosInstance.post(`token/`, {username: formData.username,password: \"OLsbd!@#45\"+formData.password,})\n\t\t\t.then((res) => {\n\t\t\t\tlocalStorage.setItem('access_token', res.data.access);\n\t\t\t\tlocalStorage.setItem('refresh_token', res.data.refresh);\n\t\t\t\taxiosInstance.defaults.headers['Authorization'] =\n\t\t\t\t\t'JWT ' + localStorage.getItem('access_token');\n\t\t\t\tprops.setLoggedIn(true);\n\t\t\t\t//history.push('/');\n\t\t\t\t//console.log(res);\n\t\t\t\t//console.log(res.data);\n\t\t\t});\n\t};   \n\n\n   const mouseOver=()=>{\n\n   setFieldColor({borderColor: \"var(--themeColor)\",borderWidth:\"1px\"});\n\n   }\n\n   const mouseLeave=()=>{\n\n   setFieldColor({borderColor: \"lightgrey\",borderWidth:\"1px\"});\n\n   }\n\n\n\n\n\n\n   const handleSubmitGetOTP=(e)=>{\n    e.preventDefault();\n\n    if(formData.username.length !==10){\n\n     alert(\"Enter a 10 digit number\");\n\n    }\n\n\n    formData[\"username\"] = \"+91\"+formData.username;\n    setLoginState(loginState=>\"OTPsending\");\n\n    changepassword({formData, setLoginState});\n\n\n   } \n\n   let otpArr=[];\n   const handleChangeOTP=(e)=>{\n\n     updateFormData({\n                        ...formData,\n                        [e.target.name]: e.target.value.trim(),\n                });\n\n    //setInputFocus();\n    if(e.target.name===\"first\"){setInputFocus2()}\n    if(e.target.name===\"second\"){setInputFocus3()}\n    if(e.target.name===\"third\"){setInputFocus4()}\n    if(e.target.name===\"fourth\"){setInputFocus5()}\t   \n\n   \n\n\n  console.log(\"otpArr: \", otpArr);\n\n    if(\n       e.target.name===\"fifth\"\n      ){\n\n          setButtonStyleOTP({\n            color:'white',\n            backgroundColor:'var(--themeColor)'\n           });\n       }\n   }\n\n\n\n\n\n\n   console.log(\"formData: \", formData);\n\n\n\nreturn (\n\n\n\n<div className={classes.registerParent}>\n  \n\n   <LoginHeader/>\n\n\n     { loginState===\"OTPsending\" &&\n          <div className={classes.registerDiv}>\n               <div className={classes.titleDiv}> <h2>Sending OTP ... </h2> </div>\n               <div style={{margin:'auto'}}>\n                   <FadeLoader color={color} loading={true} css={override} size={50}   />\n               </div>\n          </div>\n    }\n\n\n\n\n\n\n    \n   { loginState ===\"OTPnotrequested\" && <>\n\n\n     <div className={classes.registerDiv}>\n\n\n      <div className={classes.titleDiv}> <h2> Login </h2> </div> \n\n      <div className={classes.switchMethodDiv}>  </div>\n\n\n      <div className={classes.phoneNumberDiv}>\n         <div className={classes.phonetitle}>Enter mobile number </div>\n\n         <div className={classes.enterPhoneDiv}>\n\n          <div className={classes.countryCodes}>\n\n            <img\n               alt=\"India\"\n               className={classes.inflag}\n               src=\"http://purecatamphetamine.github.io/country-flag-icons/3x2/IN.svg\"/>\n               <i> +91</i>\n\n          </div>\n\n           <input\n             type=\"number\"\n\t     max=\"9\" \n\t     min=\"0\"\n             onChange={handleChangeUserName}\n             name=\"username\"\n             placeholder=\"Enter mobile number\"\n             className={classes.usernameInput}\n          />\n\n\n\n       </div>\n\n       <div className={classes.phonetnc}>By continuing, you agree to our  Terms of Service  and  Privacy Policy  </div>\n     </div>\n\n\n     <div className={classes.submitButtonDiv}>\n\n           <button type=\"button\" onClick={handleSubmitGetOTP} className={classes.sendOTPButton} style={buttonStyle}> <b>Send OTP</b>  </button>\n\n     </div>\n     \n\n\n\n\n    </div>\n    </>\n    }\n\n\n\n    { loginState===\"OTPsent\" && <>\n\n\n       <div className={classes.registerDiv}>\t\t    \n\n       <div className={classes.titleDiv}> <h2> Login </h2> </div>\n\n       <div className={classes.switchMethodDiv}>  </div>\n\n \n       <div className={classes.phoneNumberDiv}>\n           <div className={classes.phonetitle}>Enter OTP </div>\n\n           <div className={classes.enterOTPDiv}>\n\n           \n\n\t     <OTPinputUnit handleChangeOTP={handleChangeOTP} name=\"first\" inputRef={inputRef1}/>\t     \n\t     <OTPinputUnit handleChangeOTP={handleChangeOTP} name=\"second\" inputRef={inputRef2}/>\n\t     <OTPinputUnit handleChangeOTP={handleChangeOTP} name=\"third\" inputRef={inputRef3}/>\t    \n             <OTPinputUnit handleChangeOTP={handleChangeOTP} name=\"fourth\" inputRef={inputRef4}/>\n             <OTPinputUnit handleChangeOTP={handleChangeOTP} name=\"fifth\" inputRef={inputRef5}/>\n              \n\n\n\n\n\n\n\n\n\n\n\n\n           </div>\n\n\n         <div className={classes.phonetnc}>By continuing, you agree to our  Terms of Service  and  Privacy Policy  </div>\n\n\n       </div>\n\n\n\n        <div className={classes.submitButtonDiv}>\n\n           <button type=\"button\" onClick={handleSubmitOTP} className={classes.sendOTPButton} style={buttonStyleOTP}> <b>Submit OTP</b>  </button>\n\n\n       </div>\n\n\n\n\n\n\n       </div>\n\n\n    </>\n\n   }\n\n\n</div>\n\n);\n\n\n\n\n\n\n}\n\nexport default Login;\n\n\n"]},"metadata":{},"sourceType":"module"}