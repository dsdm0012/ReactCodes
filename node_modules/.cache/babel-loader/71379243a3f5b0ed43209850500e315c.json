{"ast":null,"code":"import _toConsumableArray from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{JaaSMeeting,JitsiMeeting}from'@jitsi/react-sdk';import React,{useRef,useState,useEffect}from'react';import{Route,Switch,useHistory}from'react-router-dom';import classes from'./JitsiVideo.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var JitsiVideo=function JitsiVideo(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),meetingPath=_useState2[0],setMeetingPath=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),linkCorrect=_useState4[0],setLinkCorrect=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),meetingRoomName=_useState6[0],setMeetingRoomName=_useState6[1];useEffect(function(){var meetingURL=window.location.href;var pattern='/video/meet.[1-9]+.[1-9]+.[1-9]+.[1-9]+';//let pattern2 = '/video/meet.1.1663275331164.27.54381016977858'\t    \nvar result=meetingURL.match(pattern);console.log(\"result: \",result);if(result){var urlarray=meetingURL.split(\"/\");var lastpart=urlarray[urlarray.length-2];var fullpath='/video/'+lastpart;//console.log(\"lastpart: \", lastpart);\n//  let meeting_Id=urlarray[urlarray.length-2];\n//  setMeetingId(meeting_Id);\nsetLinkCorrect(true);setMeetingPath(fullpath+'/');setMeetingRoomName(lastpart);}return function(){setMeetingPath(function(meetingPath){return null;});setLinkCorrect(false);setMeetingRoomName(null);};},[]);var apiRef=useRef();var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),logItems=_useState8[0],updateLog=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showNew=_useState10[0],toggleShowNew=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),knockingParticipants=_useState12[0],updateKnockingParticipants=_useState12[1];var printEventOutput=function printEventOutput(payload){updateLog(function(items){return[].concat(_toConsumableArray(items),[JSON.stringify(payload)]);});};var handleAudioStatusChange=function handleAudioStatusChange(payload,feature){if(payload.muted){updateLog(function(items){return[].concat(_toConsumableArray(items),[\"\".concat(feature,\" off\")]);});}else{updateLog(function(items){return[].concat(_toConsumableArray(items),[\"\".concat(feature,\" on\")]);});}};var handleChatUpdates=function handleChatUpdates(payload){if(payload.isOpen||!payload.unreadCount){return;}apiRef.current.executeCommand('toggleChat');updateLog(function(items){return[].concat(_toConsumableArray(items),[\"you have \".concat(payload.unreadCount,\" unread messages\")]);});};var handleKnockingParticipant=function handleKnockingParticipant(payload){updateLog(function(items){return[].concat(_toConsumableArray(items),[JSON.stringify(payload)]);});updateKnockingParticipants(function(participants){return[].concat(_toConsumableArray(participants),[payload===null||payload===void 0?void 0:payload.participant]);});};var resolveKnockingParticipants=function resolveKnockingParticipants(condition){knockingParticipants.forEach(function(participant){apiRef.current.executeCommand('answerKnockingParticipant',participant===null||participant===void 0?void 0:participant.id,condition(participant));updateKnockingParticipants(function(participants){return participants.filter(function(item){return item.id===participant.id;});});});};var handleJitsiIFrameRef1=function handleJitsiIFrameRef1(iframeRef){iframeRef.style.border='10px solid #3d3d3d';iframeRef.style.background='#3d3d3d';iframeRef.style.height='95vh';iframeRef.style.marginBottom='20px';};var handleJitsiIFrameRef2=function handleJitsiIFrameRef2(iframeRef){iframeRef.style.marginTop='10px';iframeRef.style.border='10px dashed #df486f';iframeRef.style.padding='5px';iframeRef.style.height='95vh';};var handleJaaSIFrameRef=function handleJaaSIFrameRef(iframeRef){iframeRef.style.border='10px solid #3d3d3d';iframeRef.style.background='#3d3d3d';iframeRef.style.height='400px';iframeRef.style.marginBottom='20px';};var handleApiReady=function handleApiReady(apiObj){apiRef.current=apiObj;apiRef.current.on('knockingParticipant',handleKnockingParticipant);apiRef.current.on('audioMuteStatusChanged',function(payload){return handleAudioStatusChange(payload,'audio');});apiRef.current.on('videoMuteStatusChanged',function(payload){return handleAudioStatusChange(payload,'video');});apiRef.current.on('raiseHandUpdated',printEventOutput);apiRef.current.on('titleViewChanged',printEventOutput);apiRef.current.on('chatUpdated',handleChatUpdates);apiRef.current.on('knockingParticipant',handleKnockingParticipant);};var handleReadyToClose=function handleReadyToClose(){/* eslint-disable-next-line no-alert */alert('Ready to close...');};var generateRoomName=function generateRoomName(){return\"diracAIMeetRoomNo\".concat(Math.random()*100,\"-\").concat(Date.now());};// Multiple instances demo\nvar renderNewInstance=function renderNewInstance(){if(!showNew){return null;}return/*#__PURE__*/_jsx(JitsiMeeting,{roomName:generateRoomName(),getIFrameRef:handleJitsiIFrameRef2});};var renderButtons=function renderButtons(){return/*#__PURE__*/_jsx(\"div\",{style:{margin:'15px 0'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'center'},children:[/*#__PURE__*/_jsx(\"button\",{type:\"text\",title:\"Click to execute toggle raise hand command\",style:{border:0,borderRadius:'6px',fontSize:'14px',background:'#f8ae1a',color:'#040404',padding:'12px 46px',margin:'2px 2px'},onClick:function onClick(){return apiRef.current.executeCommand('toggleRaiseHand');},children:\"Raise hand\"}),/*#__PURE__*/_jsx(\"button\",{type:\"text\",title:\"Click to approve/reject knocking participant\",style:{border:0,borderRadius:'6px',fontSize:'14px',background:'#0056E0',color:'white',padding:'12px 46px',margin:'2px 2px'},onClick:function onClick(){return resolveKnockingParticipants(function(_ref){var name=_ref.name;return!name.includes('test');});},children:\"Resolve lobby\"}),/*#__PURE__*/_jsx(\"button\",{type:\"text\",title:\"Click to execute subject command\",style:{border:0,borderRadius:'6px',fontSize:'14px',background:'#df486f',color:'white',padding:'12px 46px',margin:'2px 2px'},onClick:function onClick(){return apiRef.current.executeCommand('subject','New Subject');},children:\"Change subject\"}),/*#__PURE__*/_jsx(\"button\",{type:\"text\",title:\"Click to create a new JitsiMeeting instance\",style:{border:0,borderRadius:'6px',fontSize:'14px',background:'#3D3D3D',color:'white',padding:'12px 46px',margin:'2px 2px'},onClick:function onClick(){return toggleShowNew(!showNew);},children:\"Toggle new instance\"})]})});};var renderLog=function renderLog(){return logItems.map(function(item,index){return/*#__PURE__*/_jsx(\"div\",{style:{fontFamily:'monospace',padding:'5px'},children:item},index);});};var renderSpinner=function renderSpinner(){return/*#__PURE__*/_jsx(\"div\",{style:{fontFamily:'sans-serif',textAlign:'center'},children:\"Loading..\"});};var roomName_=\"diracAI\";//generateRoomName()\nconsole.log(\"room No: \",generateRoomName());console.log(\"meeting path: \",meetingPath);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Route,{exact:true,path:meetingPath,children:/*#__PURE__*/_jsxs(\"div\",{style:{borderStyle:'none',height:'100vh'},children:[linkCorrect&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(JitsiMeeting,{roomName:meetingRoomName,spinner:renderSpinner,config:{subject:'lalalala',hideConferenceSubject:false},onApiReady:function onApiReady(externalApi){return handleApiReady(externalApi);},onReadyToClose:handleReadyToClose,getIFrameRef:handleJitsiIFrameRef1})}),!linkCorrect&&/*#__PURE__*/_jsx(\"div\",{className:classes.wrongLinkMessage,children:/*#__PURE__*/_jsx(\"h1\",{children:\"Looks like you have entered a wrong link\"})})]})})});};export default JitsiVideo;","map":null,"metadata":{},"sourceType":"module"}