{"ast":null,"code":"import _slicedToArray from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import classes from'./VideoPlayer.module.css';import{FaMicrophone,FaMicrophoneSlash}from'react-icons/fa';import{BsFillCameraVideoFill,BsFillCameraVideoOffFill,BsFillTelephoneXFill,BsFillChatLeftTextFill,BsFillPeopleFill}from'react-icons/bs';import{FiShare}from'react-icons/fi';import{GiCctvCamera}from'react-icons/gi';import UnitVideo from'./UnitVideo';import ChatBox from'./ChatBox';import AgoraRTC from'agora-rtc-sdk-ng';import useAgora from'./hooks/useAgora';import MediaPlayer from'./components/MediaPlayer';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var client=AgoraRTC.createClient({codec:'h264',mode:'rtc'});var VideoPlayer=function VideoPlayer(){//console.log(\"client.uid:  \", client.uid);\nvar _useState=useState('4661d9bf245f4ed19e45c3747944d6be'),_useState2=_slicedToArray(_useState,2),appid=_useState2[0],setAppid=_useState2[1];var _useState3=useState('0064661d9bf245f4ed19e45c3747944d6beIABw+/eCjfWGjOOMwae88O8Jqsg0nDzN+fr9gzsZMJPd3RELSA0AAAAAEACDxJolH5q0YgEAAQAfmrRi'),_useState4=_slicedToArray(_useState3,2),token=_useState4[0],setToken=_useState4[1];var _useState5=useState('livestream1'),_useState6=_slicedToArray(_useState5,2),channel=_useState6[0],setChannel=_useState6[1];var _useAgora=useAgora(client),localAudioTrack=_useAgora.localAudioTrack,localVideoTrack=_useAgora.localVideoTrack,leave=_useAgora.leave,join=_useAgora.join,joinState=_useAgora.joinState,remoteUsers=_useAgora.remoteUsers;var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showVideoPlayerScreen=_useState8[0],setShowVideoPlayerScreen=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),username=_useState10[0],setUsername=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),playing=_useState12[0],setPlaying=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),showChatBox=_useState14[0],setShowChatBox=_useState14[1];var HEIGHT=700;var WIDTH=700;var startVideo=function startVideo(){setPlaying(true);navigator.getUserMedia({video:true},function(stream){var video=document.getElementsByClassName('app__videoFeed')[0];if(video){video.srcObject=stream;}},function(err){return console.error(err);});};var stopVideo=function stopVideo(){setPlaying(false);var video=document.getElementsByClassName('app__videoFeed')[0];video.srcObject.getTracks()[0].stop();};var showChatBoxHandler=function showChatBoxHandler(){setShowChatBox(function(showChatBox){return!showChatBox;});};var JoinMeetingHandler=function JoinMeetingHandler(){setShowVideoPlayerScreen(true);//client.uid=\"bibhu\"\nvar uid=username;join(appid,channel,token,uid);};var stopVideoHandler=function stopVideoHandler(){};//console.log(\"username: \", username);\nreturn/*#__PURE__*/_jsxs(\"div\",{className:classes.videoPlayer,children:[!showVideoPlayerScreen&&/*#__PURE__*/_jsxs(\"div\",{className:classes.beforeJoinScreen,children:[\"Enter Name\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",style:{borderStyle:\"solid\"},name:\"username\",onChange:function onChange(event){setUsername(event.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:JoinMeetingHandler,children:\"Join Meeting \"})]}),showVideoPlayerScreen&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.videoParentDiv,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.videoDiv,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.oneVideoDiv,children:[/*#__PURE__*/_jsxs(\"p\",{className:classes.userName,children:[localVideoTrack&&\"localTrack\",joinState&&localVideoTrack?\"(\".concat(client.uid,\")\"):'']}),/*#__PURE__*/_jsx(MediaPlayer,{videoTrack:localVideoTrack,audioTrack:undefined})]})}),showChatBox&&/*#__PURE__*/_jsx(ChatBox,{})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.toolsDiv,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.timeInfo,children:\" 5:30pm  \"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.buttonIcons,children:[/*#__PURE__*/_jsx(FaMicrophone,{className:classes.Icon}),/*#__PURE__*/_jsxs(\"button\",{onClick:stopVideoHandler,className:classes.Icon,children:[\" \",/*#__PURE__*/_jsx(BsFillCameraVideoFill,{}),\" \"]}),/*#__PURE__*/_jsx(GiCctvCamera,{className:classes.Icon}),/*#__PURE__*/_jsx(FiShare,{className:classes.Icon}),/*#__PURE__*/_jsx(BsFillTelephoneXFill,{className:classes.Icon3})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.toolsDivRight,children:[/*#__PURE__*/_jsx(\"button\",{className:classes.buttonIconsRight,onClick:showChatBoxHandler,children:/*#__PURE__*/_jsx(BsFillPeopleFill,{className:classes.IconChat})}),/*#__PURE__*/_jsx(\"button\",{className:classes.buttonIconsRight,onClick:showChatBoxHandler,children:/*#__PURE__*/_jsx(BsFillChatLeftTextFill,{className:classes.IconChat})})]})]})]})]});};export default VideoPlayer;","map":{"version":3,"sources":["/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/src/VideoPlayer/VideoPlayer.js"],"names":["React","useState","classes","FaMicrophone","FaMicrophoneSlash","BsFillCameraVideoFill","BsFillCameraVideoOffFill","BsFillTelephoneXFill","BsFillChatLeftTextFill","BsFillPeopleFill","FiShare","GiCctvCamera","UnitVideo","ChatBox","AgoraRTC","useAgora","MediaPlayer","client","createClient","codec","mode","VideoPlayer","appid","setAppid","token","setToken","channel","setChannel","localAudioTrack","localVideoTrack","leave","join","joinState","remoteUsers","showVideoPlayerScreen","setShowVideoPlayerScreen","username","setUsername","playing","setPlaying","showChatBox","setShowChatBox","HEIGHT","WIDTH","startVideo","navigator","getUserMedia","video","stream","document","getElementsByClassName","srcObject","err","console","error","stopVideo","getTracks","stop","showChatBoxHandler","JoinMeetingHandler","uid","stopVideoHandler","videoPlayer","beforeJoinScreen","borderStyle","event","target","value","videoParentDiv","videoDiv","oneVideoDiv","userName","undefined","toolsDiv","timeInfo","buttonIcons","Icon","Icon3","toolsDivRight","buttonIconsRight","IconChat"],"mappings":"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","sourcesContent":["import React,{useState} from 'react';\nimport classes from './VideoPlayer.module.css';\n\n\nimport {FaMicrophone, FaMicrophoneSlash} from 'react-icons/fa';\nimport {BsFillCameraVideoFill, BsFillCameraVideoOffFill,BsFillTelephoneXFill, BsFillChatLeftTextFill,BsFillPeopleFill} from 'react-icons/bs';\n\nimport {FiShare} from 'react-icons/fi';\n\nimport {GiCctvCamera} from 'react-icons/gi';\n\nimport UnitVideo from './UnitVideo';\nimport ChatBox from './ChatBox';\nimport AgoraRTC from 'agora-rtc-sdk-ng';\nimport useAgora from './hooks/useAgora';\nimport MediaPlayer from './components/MediaPlayer';\n\nconst client = AgoraRTC.createClient({ codec: 'h264', mode: 'rtc' });\n\n\n\n\nconst VideoPlayer=()=>{\n\n\n      //console.log(\"client.uid:  \", client.uid);\n\n      const [ appid, setAppid ] = useState('4661d9bf245f4ed19e45c3747944d6be');\n      const [ token, setToken ] = useState('0064661d9bf245f4ed19e45c3747944d6beIABw+/eCjfWGjOOMwae88O8Jqsg0nDzN+fr9gzsZMJPd3RELSA0AAAAAEACDxJolH5q0YgEAAQAfmrRi');\n      const [ channel, setChannel ] = useState('livestream1')\n\n\n      const {\n    localAudioTrack, localVideoTrack, leave, join, joinState, remoteUsers\n  } = useAgora(client);\n\n\n\n      const [showVideoPlayerScreen, setShowVideoPlayerScreen] = useState(false);\n\n      const [username,setUsername]= useState(null);\n\n\n      const [playing, setPlaying] = useState(false);\n\n      const [showChatBox, setShowChatBox] = useState(false);\n\n\n      const HEIGHT = 700;\n      const WIDTH = 700;\n\n      const startVideo = () => {\n\t\tsetPlaying(true);\n\t\tnavigator.getUserMedia(\n\t\t\t{\n\t\t\t\tvideo: true,\n\t\t\t},\n\t\t\t(stream) => {\n\t\t\t\tlet video = document.getElementsByClassName('app__videoFeed')[0];\n\t\t\t\tif (video) {\n\t\t\t\t\tvideo.srcObject = stream;\n\t\t\t\t}\n\t\t\t},\n\t\t\t(err) => console.error(err)\n\t\t);\n\t};\n\n\n\n    const stopVideo = () => {\n\t\tsetPlaying(false);\n\t\tlet video = document.getElementsByClassName('app__videoFeed')[0];\n\t\tvideo.srcObject.getTracks()[0].stop();\n\t};\n\n\n    const showChatBoxHandler =()=>{\n      setShowChatBox(showChatBox=>!showChatBox);\n\n    }\n\n   \n    const JoinMeetingHandler=()=>{\n     setShowVideoPlayerScreen(true);\n     //client.uid=\"bibhu\"\n      let uid=username;\n     join(appid, channel, token,uid);\n    }\t\n\n\n\n   const stopVideoHandler=()=>{\n\n\n\n   }\n\n\n\n   //console.log(\"username: \", username);\n\n\n\n\n\n return (\n\n\n   <div className={classes.videoPlayer}>\n\n     { !showVideoPlayerScreen &&\n     <div className={classes.beforeJoinScreen}>\n        Enter Name\n        <input\n\t type=\"text\"\n\t style={{borderStyle:\"solid\"}}\n\t name=\"username\"\n         onChange={(event) => { setUsername(event.target.value) }}\n\n\t /> \n        <button type=\"button\" onClick={JoinMeetingHandler}>Join Meeting </button>\n     </div>\n     }\n\n     { showVideoPlayerScreen &&  <>\n\n       <div className={classes.videoParentDiv}>\n\n        <div className={classes.videoDiv}>\n\t                      \n\t\t\t       \n                               \n            <div className={classes.oneVideoDiv}>\n\t\t                {/*\n                                <video    \n                                        style={{height:\"100%\",width:\"100%\"}}\n                                        className={classes.oneVideoDiv}\n                                        muted\n                                        autoPlay\n                                        className=\"app__videoFeed\"\n                                        >    \n                               </video>\n                               */}\t\t\t      \n\n\n\n             <p className={classes.userName}>{localVideoTrack && `localTrack`}{joinState && localVideoTrack ? `(${client.uid})` : ''}</p>\n\n             <MediaPlayer videoTrack={localVideoTrack} audioTrack={undefined}></MediaPlayer>\n\n\n\t    </div>\n\n                                                                                                    \n\n            </div>\n\n                { showChatBox && \n                    <ChatBox/>\n                 }\t\t\n            </div>\n\n\n\n\n        <div className={classes.toolsDiv}>\n\n            <div className={classes.timeInfo}> 5:30pm  </div>\n\n            <div className={classes.buttonIcons}>\n                   <FaMicrophone className={classes.Icon}/>\n\n        \n                    {/*playing ? (\n                                        <button onClick={stopVideo} className={classes.Icon} > <BsFillCameraVideoFill/> </button>\n                                ) : (\n                                        <button onClick={startVideo} className={classes.IconOff} > <BsFillCameraVideoOffFill/> </button>\n                     )*/}\n\n\n\t           <button onClick={stopVideoHandler} className={classes.Icon} > <BsFillCameraVideoFill/> </button>\n\n\n                   <GiCctvCamera className={classes.Icon}/>\n\n                   <FiShare className={classes.Icon}/>\n\n                   <BsFillTelephoneXFill className={classes.Icon3} />\n       \n            </div>\n\n\n           <div className={classes.toolsDivRight}>\n\n            <button className={classes.buttonIconsRight} onClick={showChatBoxHandler}>\n\n               <BsFillPeopleFill className={classes.IconChat}/>\n\n            </button>\n\n            <button className={classes.buttonIconsRight} onClick={showChatBoxHandler}>\n\n               <BsFillChatLeftTextFill className={classes.IconChat}/>\n\n            </button>\n\n\n\n\n           </div>\n\n\n        </div>\n\n\n\n\n       </>}\n\n\n\n   </div>\n\n\n\n\n );\n\n\n\n\n\t\n\n}\n\n\nexport default VideoPlayer;\n"]},"metadata":{},"sourceType":"module"}