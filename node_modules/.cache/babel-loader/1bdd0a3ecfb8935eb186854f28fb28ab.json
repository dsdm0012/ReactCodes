{"ast":null,"code":"import React,{useRef,useEffect}from\"react\";import classes from\"./ChatScreen.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChatScreen=function ChatScreen(props){var messages=props.messages;var messagesEndRef=useRef(null);var scrollToBottom=function scrollToBottom(){var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});};useEffect(function(){scrollToBottom();},[messages]);var commentTime=function commentTime(_ref){var datetime=_ref.datetime;var DatetimeLocalFull=new Date(datetime);//console.log(\"DatetimeLocalFull: \", datetime);\nvar DatetimeLocalFullStr=String(DatetimeLocalFull);var dayStr=DatetimeLocalFullStr.split(\" \").at(0);var dateStr=DatetimeLocalFullStr.split(\" \").at(2);var month=DatetimeLocalFullStr.split(\" \").at(1);var fullTimeLocal=DatetimeLocalFullStr.split(\" \").at(4);var fullTimeLocalStr=String(fullTimeLocal);var localTimeHour=fullTimeLocalStr.split(\":\").at(0);var localTimeMin=fullTimeLocalStr.split(\":\").at(1);var ampm=\"am\";if(localTimeHour==12){ampm='pm';}else if(localTimeHour==0){localTimeHour=12;}else if(localTimeHour>12){localTimeHour-=12;ampm='pm';}var time=String(localTimeHour)+\":\"+String(localTimeMin)+String(ampm)+\", \"+String(dayStr)+\", \"+String(dateStr)+\" \"+String(month);return time;};var currentTime=function currentTime(){var now=new Date();var timeInfo=String(now);//\"Sun Jul 24 2022 00:23:04 GMT-0700 (Pacific Daylight Time)\";\n//console.log(\"Now time : \", ttime.split(\" \").at(0));\nvar dayStr=timeInfo.split(\" \").at(0);var dateStr=timeInfo.split(\" \").at(2);var month=timeInfo.split(\" \").at(1);var time=timeInfo.split(\" \").at(4);var timehour=time.split(\":\").at(0);var timemin=time.split(\":\").at(1);var ampm;if(timehour<12){ampm=\"am\";}if(timehour>12){timehour=timehour-12;ampm=\"pm\";}var finaltime=String(timehour)+\":\"+String(timemin)+String(ampm)+\", \"+String(dayStr)+\", \"+String(dateStr)+\" \"+String(month);return finaltime;};var listInnerRef=useRef();var onScrollHandler=function onScrollHandler(){if(listInnerRef.current){var _listInnerRef$current=listInnerRef.current,scrollTop=_listInnerRef$current.scrollTop,scrollHeight=_listInnerRef$current.scrollHeight,clientHeight=_listInnerRef$current.clientHeight;if(scrollTop+clientHeight===scrollHeight){//console.log(\"reached bottom\");\nprops.loadDownHandler();}if(scrollTop===0){//console.log(\"reached top\");\nprops.loadUpHandler();}}};return/*#__PURE__*/_jsxs(\"div\",{className:classes.chatScreen,onScroll:onScrollHandler,ref:listInnerRef,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.dummyDiv1,children:\"  Bibhuprasad   \"}),props.commentObj.slice(0).reverse().map(function(comment,index){var datetime=comment.commenttime;return/*#__PURE__*/_jsxs(\"div\",{className:classes.comment,children:[comment.commenter===props.currentUser&&/*#__PURE__*/_jsxs(\"i\",{className:classes.commentText,children:[/*#__PURE__*/_jsxs(\"span\",{children:[\" \",comment.commenttext]}),/*#__PURE__*/_jsx(\"span\",{className:classes.chatTime,children:/*#__PURE__*/_jsxs(\"span\",{className:classes.timeText,children:[\"  \",commentTime({datetime:datetime})]})})]}),comment.commenter!==props.currentUser&&/*#__PURE__*/_jsxs(\"i\",{className:classes.commentText,style:{backgroundColor:'white',float:'left',marginLeft:'100px',boxShadow:'rgba(99, 99, 99, 0.2) 0px 2px 8px 0px'},children:[/*#__PURE__*/_jsxs(\"span\",{children:[\" \",comment.commenttext]}),/*#__PURE__*/_jsx(\"span\",{className:classes.chatTime,children:/*#__PURE__*/_jsxs(\"span\",{className:classes.timeText,children:[\"  \",commentTime({datetime:datetime})]})})]})]},index);}),messages.map(function(message,index){var allMsg=message.split(\" \");var userId=allMsg[allMsg.length-2];var fullMsg=allMsg;var GroupIdArr=fullMsg.splice(allMsg.length-1,1);var SenderIdArr=fullMsg.splice(allMsg.length-1,1);var GroupId=GroupIdArr[0];var SenderId=SenderIdArr[0];//console.log(\"fullMsg: \", fullMsg)\n//console.log(\"SenderId: \", SenderId[0]);\n//console.log(\"GroupId: \", GroupId[0]);\n//let displayMsg1 = allMsg.pop();\n//let displayMsg2 = allMsg.pop(); \n//console.log(\"group Id: \", typeof(GroupId), typeof(props.chatGroup.id));\nreturn/*#__PURE__*/_jsxs(\"div\",{className:classes.comment,children:[Number(userId)===props.currentUser&&Number(GroupId)===Number(props.chatGroup.id)&&/*#__PURE__*/_jsxs(\"i\",{className:classes.commentText,children:[/*#__PURE__*/_jsxs(\"span\",{children:[\" \",fullMsg.join(\" \")]}),/*#__PURE__*/_jsx(\"span\",{className:classes.chatTime,children:/*#__PURE__*/_jsxs(\"span\",{className:classes.timeText,children:[\"  \",currentTime()]})})]}),Number(userId)!==props.currentUser&&Number(GroupId)===Number(props.chatGroup.id)&&/*#__PURE__*/_jsxs(\"i\",{className:classes.commentText,style:{backgroundColor:'white',float:'left',marginLeft:'100px',boxShadow:'rgba(99, 99, 99, 0.2) 0px 2px 8px 0px'},children:[/*#__PURE__*/_jsxs(\"span\",{children:[\" \",fullMsg.join(\" \")]}),/*#__PURE__*/_jsx(\"span\",{className:classes.chatTime,children:/*#__PURE__*/_jsxs(\"span\",{className:classes.timeText,children:[\"  \",currentTime()]})})]})]},index);}),/*#__PURE__*/_jsx(\"div\",{className:classes.dummyDiv,ref:messagesEndRef,children:\"   \"})]});};export default ChatScreen;","map":null,"metadata":{},"sourceType":"module"}