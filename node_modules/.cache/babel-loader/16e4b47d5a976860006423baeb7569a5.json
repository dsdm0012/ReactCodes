{"ast":null,"code":"import _defineProperty from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,CSSProperties,useRef}from'react';import axiosInstance from'../axios';//import { Link } from 'react-router-dom';\n//import classes from \"./Login.module.css\"\nimport classes from'./Register.module.css';import LoginHeader from\"./LoginHeader\";//import LoginFooter from \"./LoginFooter\";\n//import logoImage from './BWlogo.JPG'\nimport{useHistory}from\"react-router-dom\";import{changepassword}from'./AllAPICalls';import FadeLoader from\"react-spinners/FadeLoader\";import OTPinputUnit from'./OTPinputUnit';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var override={display:\"block\",margin:\"0 auto\",borderColor:\"red\"};var useFocus=function useFocus(){var htmlElRef=useRef(null);var setFocus=function setFocus(){htmlElRef.current&&htmlElRef.current.focus();};return[htmlElRef,setFocus];};var Login=function Login(props){var history=useHistory();var loadedUsername=String(props.loadedUsername);var phoneNum=loadedUsername.replace('+91','');var _useState=useState(phoneNum),_useState2=_slicedToArray(_useState,2),UsernameValue=_useState2[0],setUsernameValue=_useState2[1];var color=\"var(--themeColor);\";var initialFormData=Object.freeze({username:loadedUsername,email:'',password:''});var _useState3=useState(initialFormData),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],updateFormData=_useState4[1];var _useState5=useState(loadedUsername.length<9?{color:'grey',backgroundColor:'lightgrey'}:{color:'white',backgroundColor:'var(--themeColor)'}),_useState6=_slicedToArray(_useState5,2),buttonStyle=_useState6[0],setButtonStyle=_useState6[1];var _useState7=useState({color:'grey',backgroundColor:'lightgrey'}),_useState8=_slicedToArray(_useState7,2),buttonStyleOTP=_useState8[0],setButtonStyleOTP=_useState8[1];var _useState9=useState(\"OTPnotrequested\"),_useState10=_slicedToArray(_useState9,2),loginState=_useState10[0],setLoginState=_useState10[1];var _useFocus=useFocus(),_useFocus2=_slicedToArray(_useFocus,2),inputRef1=_useFocus2[0],setInputFocus1=_useFocus2[1];var _useFocus3=useFocus(),_useFocus4=_slicedToArray(_useFocus3,2),inputRef2=_useFocus4[0],setInputFocus2=_useFocus4[1];var _useFocus5=useFocus(),_useFocus6=_slicedToArray(_useFocus5,2),inputRef3=_useFocus6[0],setInputFocus3=_useFocus6[1];var _useFocus7=useFocus(),_useFocus8=_slicedToArray(_useFocus7,2),inputRef4=_useFocus8[0],setInputFocus4=_useFocus8[1];var _useFocus9=useFocus(),_useFocus10=_slicedToArray(_useFocus9,2),inputRef5=_useFocus10[0],setInputFocus5=_useFocus10[1];var handleChangeUserName=function handleChangeUserName(event){setUsernameValue(event.target.value);updateFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},event.target.name,event.target.value.trim())));if(event.target.value.length===10||UsernameValue.length===10){setButtonStyle({color:'white',backgroundColor:'var(--themeColor)'});}else{setButtonStyle({color:'grey',backgroundColor:'lightgrey'});}};var handleSubmitOTP=function handleSubmitOTP(e){e.preventDefault();if(!(\"first\"in formData&&formData.first!==\"\")||!(\"second\"in formData&&formData.second!==\"\")||!(\"third\"in formData&&formData.third!==\"\")||!(\"fourth\"in formData&&formData.fourth!==\"\")||!(\"fifth\"in formData&&formData.fifth!==\"\")){alert(\"fill all the boxes \");}formData[\"password\"]=String(formData.first)+String(formData.second)+String(formData.third)+String(formData.fourth)+String(formData.fifth);axiosInstance.post(\"token/\",{username:formData.username,password:\"OLsbd!@#45\"+formData.password}).then(function(res){localStorage.setItem('access_token',res.data.access);localStorage.setItem('refresh_token',res.data.refresh);axiosInstance.defaults.headers['Authorization']='JWT '+localStorage.getItem('access_token');props.setLoggedIn(true);var location_=window.location.href;if(location_.includes(\"createaccount\")){window.location.href=\"https://app.diracai.com/dashboard/general/courses\";}});};var handleSubmitGetOTP=function handleSubmitGetOTP(e){e.preventDefault();if(!formData.username.includes(\"+91\")&&formData.username.length!==10){alert(\"Enter a 10 digit number\");}if(formData.username.includes(\"+91\")&&formData.username.length!==13){alert(\"Enter a 10 digit number\");}if(!formData.username.includes(\"+91\")){formData['username']=\"+91\"+formData.username;}if(formData.username.length===13){setLoginState(function(loginState){return\"OTPsending\";});changepassword({formData:formData,setLoginState:setLoginState});}};var handleChangeOTP=function handleChangeOTP(e){updateFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value.trim())));//setInputFocus();\nif(e.target.name===\"first\"){setInputFocus2();}if(e.target.name===\"second\"){setInputFocus3();}if(e.target.name===\"third\"){setInputFocus4();}if(e.target.name===\"fourth\"){setInputFocus5();}if(e.target.name===\"fifth\"){setButtonStyleOTP({color:'white',backgroundColor:'var(--themeColor)'});}};var createAccountPageHandler=function createAccountPageHandler(){history.push('/createaccount');};var TnSHandler=function TnSHandler(){window.open(\"https://diracai.com/terms-conditions/\",\"_blank\");};var privacyHandler=function privacyHandler(){window.open(\"https://diracai.com/privacy-policy/\",\"_blank\");};return/*#__PURE__*/_jsxs(\"div\",{className:classes.registerParent,children:[/*#__PURE__*/_jsx(LoginHeader,{}),loginState===\"OTPsending\"&&/*#__PURE__*/_jsxs(\"div\",{className:classes.registerDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.titleDiv,children:[\" \",/*#__PURE__*/_jsx(\"h2\",{children:\"Sending OTP ... \"}),\" \"]}),/*#__PURE__*/_jsx(\"div\",{style:{margin:'auto'},children:/*#__PURE__*/_jsx(FadeLoader,{color:color,loading:true,css:override,size:50})})]}),loginState===\"OTPnotrequested\"&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:classes.registerDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.titleDiv,children:[\" \",/*#__PURE__*/_jsx(\"h2\",{children:\" Login \"}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.phoneNumberDiv,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.phonetitle,children:\"Enter mobile number \"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.enterPhoneDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.countryCodes,children:[/*#__PURE__*/_jsx(\"img\",{alt:\"India\",className:classes.inflag,src:\"https://purecatamphetamine.github.io/country-flag-icons/3x2/IN.svg\"}),/*#__PURE__*/_jsx(\"i\",{children:\" +91\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",max:\"9\",min:\"0\",onChange:handleChangeUserName,name:\"username\",placeholder:\"Enter mobile number\",className:classes.usernameInput,value:UsernameValue})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.phonetnc,children:/*#__PURE__*/_jsxs(\"span\",{children:[\" By continuing, you agree to our\",/*#__PURE__*/_jsx(\"span\",{style:{color:\"var(--themeColor)\",cursor:\"pointer\"},onClick:TnSHandler,children:\" Terms of Service \"}),\"and  \",/*#__PURE__*/_jsx(\"span\",{style:{color:\"var(--themeColor)\",cursor:\"pointer\"},onClick:privacyHandler,children:\" Privacy Policy \"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.switchMethodDiv,children:\"  \"}),/*#__PURE__*/_jsx(\"div\",{className:classes.submitButtonDiv,children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:handleSubmitGetOTP,className:classes.sendOTPButton,style:buttonStyle,children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Send OTP\"}),\"  \"]})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:classes.linkToAccountCreation,onClick:createAccountPageHandler,children:\"Don't have an account? Create one here\"})]})}),loginState===\"OTPsent\"&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:classes.registerDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.titleDiv,children:[\" \",/*#__PURE__*/_jsx(\"h2\",{children:\" Login \"}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.phoneNumberDiv,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.phonetitle,children:\"Enter OTP \"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.enterOTPDiv,children:[/*#__PURE__*/_jsx(OTPinputUnit,{handleChangeOTP:handleChangeOTP,name:\"first\",inputRef:inputRef1}),/*#__PURE__*/_jsx(OTPinputUnit,{handleChangeOTP:handleChangeOTP,name:\"second\",inputRef:inputRef2}),/*#__PURE__*/_jsx(OTPinputUnit,{handleChangeOTP:handleChangeOTP,name:\"third\",inputRef:inputRef3}),/*#__PURE__*/_jsx(OTPinputUnit,{handleChangeOTP:handleChangeOTP,name:\"fourth\",inputRef:inputRef4}),/*#__PURE__*/_jsx(OTPinputUnit,{handleChangeOTP:handleChangeOTP,name:\"fifth\",inputRef:inputRef5})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.phonetnc,children:/*#__PURE__*/_jsxs(\"span\",{children:[\" By continuing, you agree to our\",/*#__PURE__*/_jsx(\"span\",{style:{color:\"var(--themeColor)\",cursor:\"pointer\"},onClick:TnSHandler,children:\" Terms of Service \"}),\"and  \",/*#__PURE__*/_jsx(\"span\",{style:{color:\"var(--themeColor)\",cursor:\"pointer\"},onClick:privacyHandler,children:\" Privacy Policy \"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.switchMethodDiv,children:\"  \"}),/*#__PURE__*/_jsx(\"div\",{className:classes.submitButtonDiv,children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:handleSubmitOTP,className:classes.sendOTPButton,style:buttonStyleOTP,children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Submit OTP\"}),\"  \"]})})]})})]});};export default Login;","map":null,"metadata":{},"sourceType":"module"}