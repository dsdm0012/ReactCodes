{"ast":null,"code":"import _slicedToArray from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import classes from\"./LeftUserBoxContainer.module.css\";import LeftNewUserBox from\"./LeftNewUserBox\";//import classimg from '../../../../../images/groupImage.png';\nimport{createchatgroup,getfewusers,usersearchgeneral,checkifuseradded}from'../../../../CommonApps/AllAPICalls';//import basewebURL from \"../../../../../basewebURL\";\nimport TopLeftSearchBarNewUser from\"./TopLeftSearchBarNewUser\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var LeftUserBoxContainer=function LeftUserBoxContainer(props){// const [usersData, setUsersData ] = useState(props.usersData);\n// const [data, setData]=useState(props.data );\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),searchedUsers=_useState2[0],getSearchedUsers=_useState2[1];var _useState3=useState(\"+91\"),_useState4=_slicedToArray(_useState3,2),searchString=_useState4[0],setSearchString=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),userExists=_useState6[0],setUserExists=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),pageNo=_useState8[0],setPageNo=_useState8[1];useEffect(function(){//setUsersData(usersData=>props.usersData);\n//setData(data=>props.data);    \n//getfewusers({num, getFewUsers});\n// console.log(\"string changed: \", searchString);\n//let searchString1=\"Mahakud\";\t\nvar pageno=pageNo;usersearchgeneral({pageno:pageno,searchString:searchString,getSearchedUsers:getSearchedUsers});return function(){getSearchedUsers(function(searchedUsers){return null;});};getSearchedUsers(function(searchedUsers){return null;});},[searchString,pageNo]);var createOneOOneGroup=function createOneOOneGroup(_ref){var userId=_ref.userId;var groupMembers=[userId,props.userData.id];var maxId=Math.max.apply(null,groupMembers);var minId=Math.min.apply(null,groupMembers);var groupname='a'+maxId+'a'+minId+'a';createchatgroup({groupname:groupname,groupMembers:groupMembers});};var createGroupHandler=function createGroupHandler(userId){var guestId=userId;checkifuseradded({userId:userId,setUserExists:setUserExists,createOneOOneGroup:createOneOOneGroup});};//console.log(\"userExists: \", userExists !==null ? userExists.exists:\"Not Valid\");\nvar loadNextPageDataHandler=function loadNextPageDataHandler(){//console.log(\"more user data requested\");\nsetPageNo(function(pageNo){return pageNo+1;});};var loadPrevPageDataHandler=function loadPrevPageDataHandler(){//console.log(\"more user data requested\");\nsetPageNo(function(pageNo){return pageNo-1;});};// const [y, setY] = useState(0);\nvar wheelHandler=function wheelHandler(){/*\n\n    console.log('onWheel: scrolling the list...', window.scrollY);\n   if (y > window.scrollY) {\n      console.log(\"scrolling up\");\n    } else if (y < window.scrollY) {\n      console.log(\"scrolling down\");\n    }\n\n    setY(window.scrollY);\n\n\n  */};//console.log(\"search string:  \", searchString);\n//console.log(\"searchedUser.results: \", searchedUsers);\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TopLeftSearchBarNewUser,{setSearchString:setSearchString,setPageNo:setPageNo}),/*#__PURE__*/_jsxs(\"div\",{className:classes.leftUserBoxContainer,onWheel:wheelHandler,children:[pageNo>1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:loadPrevPageDataHandler,className:classes.loadMoreDataButton,children:\"Load previous data\"}),searchedUsers!==null&&searchedUsers.results!==null&&searchedUsers.results.map(function(user,index){return/*#__PURE__*/_jsx(LeftNewUserBox,{userImage:user.profile_image,userName:user.firstname!==\"\"&&user.lastname!==\"\"?user.firstname+\" \"+user.lastname:user.username,onPress:function onPress(){return createGroupHandler(user.id);}},index);}),searchedUsers!==null&&searchedUsers.results!==null&&searchedUsers.next!==null&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:loadNextPageDataHandler,className:classes.loadMoreDataButton,children:\"Load more data\"})]})]});};export default LeftUserBoxContainer;","map":{"version":3,"sources":["/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/src/MainApps/Chat/ChatNavBar/AddUser/LeftNewUserBoxContainer.js"],"names":["React","useState","useEffect","classes","LeftNewUserBox","createchatgroup","getfewusers","usersearchgeneral","checkifuseradded","TopLeftSearchBarNewUser","LeftUserBoxContainer","props","searchedUsers","getSearchedUsers","searchString","setSearchString","userExists","setUserExists","pageNo","setPageNo","pageno","createOneOOneGroup","userId","groupMembers","userData","id","maxId","Math","max","apply","minId","min","groupname","createGroupHandler","guestId","loadNextPageDataHandler","loadPrevPageDataHandler","wheelHandler","leftUserBoxContainer","loadMoreDataButton","results","map","user","index","profile_image","firstname","lastname","username","next"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from \"react\";\nimport classes from \"./LeftUserBoxContainer.module.css\"\nimport LeftNewUserBox from \"./LeftNewUserBox\";\n//import classimg from '../../../../../images/groupImage.png';\nimport {createchatgroup,getfewusers, usersearchgeneral, checkifuseradded} from '../../../../CommonApps/AllAPICalls';\n\n//import basewebURL from \"../../../../../basewebURL\";\nimport TopLeftSearchBarNewUser from \"./TopLeftSearchBarNewUser\";\n\n\n\nconst LeftUserBoxContainer = (props) =>{\n\n\n   // const [usersData, setUsersData ] = useState(props.usersData);\n   // const [data, setData]=useState(props.data );\n   const [searchedUsers, getSearchedUsers] = useState(null)\n   const [searchString, setSearchString] =  useState(\"+91\");\n\n   const [userExists, setUserExists ] = useState(false);\n\n   const [pageNo , setPageNo] = useState(1);\n\n   useEffect(()=>{\n\n     //setUsersData(usersData=>props.usersData);\n     //setData(data=>props.data);    \n     //getfewusers({num, getFewUsers});\n     // console.log(\"string changed: \", searchString);\n     //let searchString1=\"Mahakud\";\t\n     let pageno=pageNo;\n     usersearchgeneral({pageno,searchString, getSearchedUsers});\n     return ()=>{\n         getSearchedUsers(searchedUsers=>null);\n\n        }\n\t \n\t getSearchedUsers(searchedUsers=>null);   \n\n   },[searchString,pageNo]);\n\n\n    const createOneOOneGroup=({userId})=>{\n      \n      \t    \n      \n      let groupMembers = [userId, props.userData.id]; \n      const maxId = Math.max.apply(null, groupMembers);\n      const minId = Math.min.apply(null, groupMembers);\n      const groupname='a'+maxId+'a'+minId+'a';\t    \n      createchatgroup({groupname,groupMembers});\n\n    }\n\n\n\n   const createGroupHandler = (userId) =>{\n\n     let guestId=userId;\t   \n     checkifuseradded({userId, setUserExists, createOneOOneGroup});\n\n   }\n\n\n  //console.log(\"userExists: \", userExists !==null ? userExists.exists:\"Not Valid\");\n\n\n   const loadNextPageDataHandler=()=>{\n     //console.log(\"more user data requested\");\n     setPageNo(pageNo=>pageNo+1); \n   }\n\n\n   const loadPrevPageDataHandler=()=>{\n     //console.log(\"more user data requested\");\n     setPageNo(pageNo=>pageNo-1);\n   }\n\n\n\n\n // const [y, setY] = useState(0);\n\n  const wheelHandler=()=>{/*\n\n    console.log('onWheel: scrolling the list...', window.scrollY);\n   if (y > window.scrollY) {\n      console.log(\"scrolling up\");\n    } else if (y < window.scrollY) {\n      console.log(\"scrolling down\");\n    }\n\n    setY(window.scrollY);\n\n\n  */}\n\n\n\n\n\n\n\n\n\n   //console.log(\"search string:  \", searchString);\n   //console.log(\"searchedUser.results: \", searchedUsers);\n\nreturn(\n\n\n<>\n\n<TopLeftSearchBarNewUser setSearchString={setSearchString}  setPageNo={setPageNo}/>\n\n<div className={classes.leftUserBoxContainer} onWheel={wheelHandler}>\n\n     { pageNo >1 &&\n     <button type=\"button\" onClick={loadPrevPageDataHandler} className={classes.loadMoreDataButton}>\n\n           Load previous data\n\n      </button>\n     }\n\n\n\n      {/* in future change this logic. This must interfere performance*/}\n\n      {/*usersData.filter(\n           function(user) {\n         if (user.id === data.id) {\n              return false; \n              }\n                  return true;\n             })\n\n\n            .map((user,index)=>{\n\n\t      \n             return    <LeftNewUserBox key={index} userImage={user.profile_image} \n\t\t                       userName={user.firstname !==\"\"  && user.lastname !==\"\"? user.firstname+\" \"+user.lastname: user.username} \n\t\t                       userType={user.usetype}\n\t\t                       onPress={()=>createGroupHandler(user.id)}   \n\t\t\t               />\n              \n\n           }\n\n      )*/}\n\n\n      { searchedUsers !==null && searchedUsers.results !==null &&\n\n\t\t      searchedUsers.results.map((user, index)=>{\n\n                           return    <LeftNewUserBox key={index} userImage={user.profile_image} \n                                       userName={user.firstname !==\"\"  && user.lastname !==\"\"? user.firstname+\" \"+user.lastname: user.username} \n                                       onPress={()=>createGroupHandler(user.id)}                                       \n                                          \n                                       />\n\n\n\n\t\t      })\n\n\n\n\n      }\n\n\n\n\n\n\n     { searchedUsers !==null && searchedUsers.results !==null && searchedUsers.next !==null &&\n\n      <button type=\"button\" onClick={loadNextPageDataHandler} className={classes.loadMoreDataButton}>\n           \n\t   Load more data\n\n      </button>\n\n     }\n\n\n</div>\n\n</>\n\n);\n\n}\n\nexport default LeftUserBoxContainer;\n"]},"metadata":{},"sourceType":"module"}