{"ast":null,"code":"var _jsxFileName = \"/home/bibhu/EDRdevelopment/DevBranch/ReactCodes/src/VideoPlayer/TwilioVideo/VideoChat.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useCallback } from 'react';\nimport Video from \"twilio-video\"; //import axiosInstance from '../../axios';\n\nimport axios from 'axios';\nimport Room from './Room';\nimport Lobby from './Lobby';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst {\n  connect\n} = require('twilio-video');\n\nconst VideoChat = () => {\n  _s();\n\n  //console.log(\"rerendering\",);\n  const [room, setRoom] = useState(null);\n  const [username, setUsername] = useState(\"\");\n  const [roomName, setRoomName] = useState(\"\");\n  const [connecting, setConnecting] = useState(false);\n  const handleUsernameChange = useCallback(event => {\n    setUsername(event.target.value); //console.log('username change');\n  }, []);\n  const handleRoomNameChange = useCallback(event => {\n    setRoomName(event.target.value); //console.log('room name change');\n  }, []);\n  const [tokenData, setToken] = useState(null);\n\n  const joinRoom = _ref => {\n    let {\n      data\n    } = _ref;\n    Video.connect(data.accessToken, {\n      name: 'coolroom'\n    }).then(room => {\n      setConnecting(false); //console.log(\"room: \", room);\t\n\n      setRoom(room);\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setConnecting(true); //console.log(\"submit data\");\n\n    let susername = 'bibhu';\n    axios.post(`https://token-service-6908-dev.twil.io/token?identity=${susername}`, {}).then(res => {\n      setToken(tokenData => res.data); //console.log(\"token data inside: \", res.data.token);\n\n      let data = res.data;\n      joinRoom({\n        data\n      });\n    });\n  };\n\n  async function handleSubmit2(event) {\n    event.preventDefault();\n    let usename = username;\n    setConnecting(true);\n\n    try {\n      const response = await fetch(`https://token-service-6908-dev.twil.io/token?identity=${usename}`);\n      const data = await response.json();\n      const room = await connect(data.accessToken, {\n        name: 'cool-room',\n        audio: true,\n        video: true\n      });\n      setRoom(room); //console.log(\"room isnide submit2: \", room);\n\n      setConnecting(false);\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  const handleLogout = () => {//console.log(\"handle Logout\");\n  }; //console.log(\"room: \", room);\n\n\n  let render;\n\n  if (room) {\n    render = /*#__PURE__*/_jsxDEV(Room, {\n      roomName: roomName,\n      room: room,\n      handleLogout: handleLogout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this);\n  } else {\n    render = /*#__PURE__*/_jsxDEV(Lobby, {\n      username: username,\n      roomName: roomName,\n      handleUsernameChange: handleUsernameChange,\n      handleRoomNameChange: handleRoomNameChange,\n      handleSubmit: handleSubmit2,\n      connecting: connecting\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this);\n  }\n\n  return render;\n};\n\n_s(VideoChat, \"FHKHgV13R0XJE6edNU0ZjxEdVII=\");\n\n_c = VideoChat;\nexport default VideoChat;\n\nvar _c;\n\n$RefreshReg$(_c, \"VideoChat\");","map":{"version":3,"names":["React","useState","useCallback","Video","axios","Room","Lobby","connect","require","VideoChat","room","setRoom","username","setUsername","roomName","setRoomName","connecting","setConnecting","handleUsernameChange","event","target","value","handleRoomNameChange","tokenData","setToken","joinRoom","data","accessToken","name","then","handleSubmit","e","preventDefault","susername","post","res","handleSubmit2","usename","response","fetch","json","audio","video","err","console","log","handleLogout","render"],"sources":["/home/bibhu/EDRdevelopment/DevBranch/ReactCodes/src/VideoPlayer/TwilioVideo/VideoChat.js"],"sourcesContent":["import React,{useState, useCallback} from 'react';\nimport Video from \"twilio-video\";\n//import axiosInstance from '../../axios';\nimport axios from 'axios';\n\nimport Room from './Room';\nimport Lobby from './Lobby';\nconst { connect } = require('twilio-video');\n\nconst VideoChat=()=>{\n\n\n   //console.log(\"rerendering\",);\n\n   const [room, setRoom] = useState(null);\n   const [username, setUsername] = useState(\"\");\n   const [roomName, setRoomName] = useState(\"\");\t\n   const [connecting, setConnecting] = useState(false);\n\n   const handleUsernameChange = useCallback((event) => {\n    setUsername(event.target.value);\n    //console.log('username change');\n\n   }, []);\n\n   const handleRoomNameChange = useCallback((event) => {\n    setRoomName(event.target.value);\n    //console.log('room name change');\n\n   }, []);\n\n   const [tokenData, setToken] = useState(null);\n   \n\n   const joinRoom=({data})=>{\n           \n    Video.connect(data.accessToken, {\n        name: 'coolroom',\n      })\n        .then((room) => {\n          setConnecting(false);\n\t  //console.log(\"room: \", room);\t\n          setRoom(room);\n        })\n\n   }\n\n\n  \n\n\n   const handleSubmit=(e)=>{\n    e.preventDefault();\t   \n    setConnecting(true);\n    //console.log(\"submit data\");\n    let susername='bibhu'\n\n    axios.post(`https://token-service-6908-dev.twil.io/token?identity=${susername}`, {\n    \n    })\n     .then((res) => {\n         setToken(tokenData=>res.data);\n          //console.log(\"token data inside: \", res.data.token);\n\t    let data=res.data; \n          joinRoom({data});\n\n\n           \n\n                })\n\n\n   }\n  \n\n    async function handleSubmit2(event) {\n \n    event.preventDefault();\t    \n    let usename=username;\t    \n    setConnecting(true);\n    try {\n       const response = await fetch(`https://token-service-6908-dev.twil.io/token?identity=${usename}`);\n       const data = await response.json();\n       const room = await connect(data.accessToken, {\n          name: 'cool-room',\n          audio: true,\n          video: true\n       });\n\n    \n      setRoom(room);\n      //console.log(\"room isnide submit2: \", room);\n      setConnecting(false);\n\n      } catch(err) {\n        console.log(err);\n    }\n   }\n\n\n\n   const handleLogout=()=>{\n\n   //console.log(\"handle Logout\");\n\n\n\n   }\n\n\n\n\n //console.log(\"room: \", room);\n\n\n let render;\n  if (room) {\n    render = (\n      <Room roomName={roomName} room={room} handleLogout={handleLogout}/>\n    );\n  } else {\n    render = (\n      <Lobby\n        username={username}\n        roomName={roomName}\n        handleUsernameChange={handleUsernameChange}\n        handleRoomNameChange={handleRoomNameChange}\n        handleSubmit={handleSubmit2}\n        connecting={connecting}\n      />\n\n\n\n    );\n  }\n  return render;\n\n\n\n\n\n\n\n\n\n}\n\n\nexport default VideoChat;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}