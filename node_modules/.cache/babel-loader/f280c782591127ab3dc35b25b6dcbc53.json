{"ast":null,"code":"import _objectSpread from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import classes from'./CourseViewDashboard_v2.module.css';import{BsFillCheckSquareFill,BsThreeDotsVertical}from'react-icons/bs';import{IoMdNotificationsOutline}from'react-icons/io';import{useHistory}from\"react-router-dom\";import{BsFillTrashFill,BsPeopleFill,BsXLg}from'react-icons/bs';import{BiEdit}from'react-icons/bi';import{AiOutlineCheck}from'react-icons/ai';import{GiHazardSign}from'react-icons/gi';import{putcourseenroll,getuserbyId,deletedashboardcourses,removecoursefromdashboard}from'../../../../../CommonApps/AllAPICalls';import coursePic from'./coursePic.jpg';import EnrollForm from'./Forms/EnrollForm';import{MdDoubleArrow}from'react-icons/md';import SelectScreen from'./SelectScreen';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CourseViewDashboard=function CourseViewDashboard(props){var history=useHistory();var _useState=useState({primary:'lightgrey',courseNameColor:\"black\",courseNameTextDecoration:\"none\"}),_useState2=_slicedToArray(_useState,2),style=_useState2[0],setStyle=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),enrollStatus=_useState4[0],showEnrollStatus=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),enrollRequests=_useState6[0],getEnrollRequests=_useState6[1];var selectedCourse=localStorage.getItem('preferredCourseId');var _useState7=useState('#25D366'),_useState8=_slicedToArray(_useState7,2),statusBkgColor=_useState8[0],setStatusBkgColor=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showSelectScreen=_useState10[0],setShowSelectScreen=_useState10[1];var moveToSubject=function moveToSubject(){if(Number(props.Course.id)===Number(selectedCourse)){history.push('/dashboard/subject');}if(Number(props.Course.id)!==Number(selectedCourse)){setShowSelectScreen(true);}};var closeSelectScreen=function closeSelectScreen(){//console.log(\"clsoe called\");\nsetShowSelectScreen(function(showSelectScreen){return false;});};var enrollInfoButtonHandler=function enrollInfoButtonHandler(){showEnrollStatus(true);};/*\n    useEffect(()=>{\n\n            props.Course.enrolementrequests.forEach((requester,index)=>{\n\n                       if(!props.Course.enrolledstudents.includes(requester)){\n                             getEnrollRequests(enrollRequests => [...enrollRequests, requester]);\n\t               }   \n\n             }\n\t    )\n\n       return ()=>{\n            getEnrollRequests([]);\n\n       }\n\n\n    },[props.Course.enrolementrequests,props.Course.enrolledstudents]);\n    */ //const [enrolledstudents,setEnrolledstudents] = useState(props.Course.enrolledstudents);\nvar enrolledstudents=props.Course.enrolled_students;var ApproveHandler=function ApproveHandler(userId){var enrollId=userId;var courseId=props.Course.id;enrolledstudents.push(enrollId);putcourseenroll({courseId:courseId,enrolledstudents:enrolledstudents});showEnrollStatus(false);};var courseSwitchHandler=function courseSwitchHandler(){localStorage.setItem('preferredCourseId',props.Course.id);//window.location.reload(false);\nprops.rerender();history.push('/dashboard/subject');};var courseSwitchAndMoveHandler=function courseSwitchAndMoveHandler(){//localStorage.setItem('preferredCourseId', props.Course.id);\t    \t    \nsetShowSelectScreen(function(showSelectScreen){return false;});localStorage.setItem('preferredCourseId',props.Course.id);// moveToSubject();\t \nprops.rerender();history.push('/dashboard/subject');};//selectedCourse !== null && Number(selectedCourse) === props.Course.id &&\nuseEffect(function(){var deepColor='#5177bd';//#0498cf';\nvar lessDeep='#bbd2fa';var lightColor='#e0ebff';//#def3fa';\nif(selectedCourse!==null&&Number(selectedCourse)===props.Course.id){setStyle(function(style){return{primary:deepColor};});};if(props.Course.courseStatus===\"closed\"){setStatusBkgColor(function(statusBkgColor){return'grey';});}return function(){};},[props.Course.id,selectedCourse,props.Course.courseStatus]);var deleteCourseHandler=function deleteCourseHandler(){alert(\"Are you sure you want to delete the course?\");var dashboardcourses=props.userData.dashboardcourses;//console.log(\"userDta \", props.userData);\n//console.log(\"dashboardcourses: \", dashboardcourses);\nif(dashboardcourses.indexOf(props.Course.id)>-1){var eleIndex=dashboardcourses.indexOf(props.Course.id);dashboardcourses.splice(eleIndex,1);deletedashboardcourses({dashboardcourses:dashboardcourses});//console.log(\"Delete Course\");    \nprops.rerender();}};var changeStyleOnMouseEnterHandler=function changeStyleOnMouseEnterHandler(){setStyle(_objectSpread(_objectSpread({},style),{},{courseNameColor:\"var(--themeColor)\",courseNameTextDecoration:\"underline\"}));};var changeStyleOnMouseLeaveHandler=function changeStyleOnMouseLeaveHandler(){setStyle(_objectSpread(_objectSpread({},style),{},{courseNameColor:\"black\",courseNameTextDecoration:\"none\"}));};var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showDropDown=_useState12[0],setShowDropDown=_useState12[1];var showActionToolsHandler=function showActionToolsHandler(){setShowDropDown(function(showDropDown){return!showDropDown;});};var removeCourseHandler=function removeCourseHandler(){var courseId=props.Course.id;removecoursefromdashboard({courseId:courseId,props:props});};var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),showEnrollForm=_useState14[0],setShowEnrollForm=_useState14[1];var enrollFormHandler=function enrollFormHandler(){setShowEnrollForm(true);};var closeEnrollFormHandler=function closeEnrollFormHandler(){setShowEnrollForm(false);};//console.log(\"course::::::::::\", props.Course.teacher.username);\nreturn/*#__PURE__*/_jsxs(\"div\",{className:classes.courseViewDashboard,onMouseEnter:changeStyleOnMouseEnterHandler,onMouseLeave:changeStyleOnMouseLeaveHandler,children:[showEnrollForm&&/*#__PURE__*/_jsx(EnrollForm,{onPress:closeEnrollFormHandler,Course:props.Course,userData:props.userData}),/*#__PURE__*/_jsxs(\"div\",{className:classes.innerMarginDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.upperPart,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.picDiv,children:/*#__PURE__*/_jsx(\"img\",{src:coursePic,className:classes.picStyle})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.upperInfoDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.topBar1,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.topBar1_left,children:[/*#__PURE__*/_jsxs(\"span\",{children:[\" \",props.Course.designedFor,\" \"]}),/*#__PURE__*/_jsxs(\"span\",{children:[\" \",props.Course.enrolled_students.length,\" Students\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.topBar1_right,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.courseCode,children:[\" \",props.Course.courseGlobalCode,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.notification,children:[\" \",/*#__PURE__*/_jsx(IoMdNotificationsOutline,{className:classes.notIcon}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.dotsButton,onClick:showActionToolsHandler,children:[/*#__PURE__*/_jsx(BsThreeDotsVertical,{}),showDropDown&&/*#__PURE__*/_jsxs(\"div\",{className:classes.dropdownButtons,children:[!props.Course.enrolled&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:classes.dropdownButton,onClick:enrollFormHandler,children:\" enroll\"}),props.Course.enrolled&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:classes.dropdownButton,children:\" enrolled\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:classes.dropdownButton,onClick:removeCourseHandler,children:\" remove\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.courseNameDiv,children:[!props.Course.enrolled&&/*#__PURE__*/_jsxs(\"span\",{className:classes.notEnrolledSign,children:[/*#__PURE__*/_jsx(GiHazardSign,{style:{color:'red',marginRight:'10px',borderStyle:'none'}}),/*#__PURE__*/_jsx(\"span\",{className:classes.toolTipText,children:\" You are not enrolled in this course \"})]}),props.Course.enrolled&&/*#__PURE__*/_jsxs(\"span\",{className:classes.notEnrolledSign,children:[/*#__PURE__*/_jsx(BsFillCheckSquareFill,{style:{color:'green',marginRight:'10px',borderStyle:'none'}}),/*#__PURE__*/_jsx(\"span\",{className:classes.toolTipText,children:\" You are enrolled in this course \"})]}),/*#__PURE__*/_jsx(\"button\",{style:{color:style.courseNameColor,textDecoration:style.courseNameTextDecoration},className:classes.courseNameButton,onClick:courseSwitchHandler,children:/*#__PURE__*/_jsxs(\"b\",{children:[\" \",props.Course.courseShortName]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.middlePart,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.middlePart_left,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.upcomingClassTitle,children:\"Upcoming class  \"}),/*#__PURE__*/_jsx(\"div\",{className:classes.upcomingClassTime,children:\" 9:30am, Today  \"})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.middlePart_middle}),/*#__PURE__*/_jsx(\"div\",{className:classes.middlePart_right,children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:classes.goToCourseButton,onClick:courseSwitchHandler,children:/*#__PURE__*/_jsx(MdDoubleArrow,{className:classes.goToCourseBtnIcon})})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.lowerPart,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.lowerPart_left,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.lowerPartTitle,children:[/*#__PURE__*/_jsx(\"b\",{children:\"Course Progress\"}),\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:classes.lowerPartInfo,children:/*#__PURE__*/_jsx(\"div\",{className:classes.progressBar,children:/*#__PURE__*/_jsx(\"div\",{className:classes.progressWidth,children:\" \"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.lowerPart_middle,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.lowerPartTitle,children:[/*#__PURE__*/_jsx(\"b\",{children:\"Tools\"}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.lowerPartInfo,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.oneTool,children:\" \"}),/*#__PURE__*/_jsx(\"div\",{className:classes.oneTool,children:\" \"}),/*#__PURE__*/_jsx(\"div\",{className:classes.oneTool,children:\" \"}),/*#__PURE__*/_jsx(\"div\",{className:classes.oneTool,children:\" \"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.lowerPart_right,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.lowerPartTitle,children:[/*#__PURE__*/_jsx(\"b\",{children:\"Instructor\"}),\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:classes.lowerPartInfo,children:/*#__PURE__*/_jsxs(\"b\",{children:[\" \",props.Course.teacher.firstname,\" \",props.Course.teacher.lastname]})})]})]})]})]});};export default CourseViewDashboard;","map":null,"metadata":{},"sourceType":"module"}