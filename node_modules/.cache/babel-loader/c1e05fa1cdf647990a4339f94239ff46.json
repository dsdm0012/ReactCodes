{"ast":null,"code":"import _defineProperty from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,CSSProperties,useRef}from'react';import axiosInstance from'../axios';//import { Link } from 'react-router-dom';\n//import classes from \"./Login.module.css\"\nimport classes from'./Register.module.css';import LoginHeader from\"./LoginHeader\";//import LoginFooter from \"./LoginFooter\";\n//import logoImage from './BWlogo.JPG'\nimport{useHistory}from\"react-router-dom\";import{changepassword}from'./AllAPICalls';import FadeLoader from\"react-spinners/FadeLoader\";import OTPinputUnit from'./OTPinputUnit';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var override={display:\"block\",margin:\"0 auto\",borderColor:\"red\"};var useFocus=function useFocus(){var htmlElRef=useRef(null);var setFocus=function setFocus(){htmlElRef.current&&htmlElRef.current.focus();};return[htmlElRef,setFocus];};var Login=function Login(props){var history=useHistory();var loadedUsername=String(props.loadedUsername);var phoneNum=loadedUsername.replace('+91','');var _useState=useState(phoneNum),_useState2=_slicedToArray(_useState,2),UsernameValue=_useState2[0],setUsernameValue=_useState2[1];var color=\"var(--themeColor);\";var initialFormData=Object.freeze({username:loadedUsername,email:'',password:''});var _useState3=useState(initialFormData),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],updateFormData=_useState4[1];var _useState5=useState(loadedUsername.length<9?{color:'grey',backgroundColor:'lightgrey'}:{color:'white',backgroundColor:'var(--themeColor)'}),_useState6=_slicedToArray(_useState5,2),buttonStyle=_useState6[0],setButtonStyle=_useState6[1];var _useState7=useState({color:'grey',backgroundColor:'lightgrey'}),_useState8=_slicedToArray(_useState7,2),buttonStyleOTP=_useState8[0],setButtonStyleOTP=_useState8[1];var _useState9=useState(\"OTPnotrequested\"),_useState10=_slicedToArray(_useState9,2),loginState=_useState10[0],setLoginState=_useState10[1];var _useFocus=useFocus(),_useFocus2=_slicedToArray(_useFocus,2),inputRef1=_useFocus2[0],setInputFocus1=_useFocus2[1];var _useFocus3=useFocus(),_useFocus4=_slicedToArray(_useFocus3,2),inputRef2=_useFocus4[0],setInputFocus2=_useFocus4[1];var _useFocus5=useFocus(),_useFocus6=_slicedToArray(_useFocus5,2),inputRef3=_useFocus6[0],setInputFocus3=_useFocus6[1];var _useFocus7=useFocus(),_useFocus8=_slicedToArray(_useFocus7,2),inputRef4=_useFocus8[0],setInputFocus4=_useFocus8[1];var _useFocus9=useFocus(),_useFocus10=_slicedToArray(_useFocus9,2),inputRef5=_useFocus10[0],setInputFocus5=_useFocus10[1];var handleChangeUserName=function handleChangeUserName(event){setUsernameValue(event.target.value);updateFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},event.target.name,event.target.value.trim())));if(event.target.value.length===10||UsernameValue.length===10){setButtonStyle({color:'white',backgroundColor:'var(--themeColor)'});}else{setButtonStyle({color:'grey',backgroundColor:'lightgrey'});}};var handleSubmitOTP=function handleSubmitOTP(e){e.preventDefault();if(!(\"first\"in formData&&formData.first!==\"\")||!(\"second\"in formData&&formData.second!==\"\")||!(\"third\"in formData&&formData.third!==\"\")||!(\"fourth\"in formData&&formData.fourth!==\"\")||!(\"fifth\"in formData&&formData.fifth!==\"\")){alert(\"fill all the boxes \");}formData[\"password\"]=String(formData.first)+String(formData.second)+String(formData.third)+String(formData.fourth)+String(formData.fifth);axiosInstance.post(\"token/\",{username:formData.username,password:\"OLsbd!@#45\"+formData.password}).then(function(res){localStorage.setItem('access_token',res.data.access);localStorage.setItem('refresh_token',res.data.refresh);axiosInstance.defaults.headers['Authorization']='JWT '+localStorage.getItem('access_token');props.setLoggedIn(true);var location_=window.location.href;if(location_.includes(\"createaccount\")){window.location.href=\"https://app.diracai.com/dashboard/general/courses\";}});};var handleSubmitGetOTP=function handleSubmitGetOTP(e){e.preventDefault();if(!formData.username.includes(\"+91\")&&formData.username.length!==10){alert(\"Enter a 10 digit number\");}if(formData.username.includes(\"+91\")&&formData.username.length!==13){alert(\"Enter a 10 digit number\");}if(!formData.username.includes(\"+91\")){formData['username']=\"+91\"+formData.username;}if(formData.username.length===13){setLoginState(function(loginState){return\"OTPsending\";});changepassword({formData:formData,setLoginState:setLoginState});}};var handleChangeOTP=function handleChangeOTP(e){updateFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value.trim())));//setInputFocus();\nif(e.target.name===\"first\"){setInputFocus2();}if(e.target.name===\"second\"){setInputFocus3();}if(e.target.name===\"third\"){setInputFocus4();}if(e.target.name===\"fourth\"){setInputFocus5();}if(e.target.name===\"fifth\"){setButtonStyleOTP({color:'white',backgroundColor:'var(--themeColor)'});}};var createAccountPageHandler=function createAccountPageHandler(){history.push('/createaccount');};var TnSHandler=function TnSHandler(){window.open(\"https://diracai.com/terms-conditions/\",\"_blank\");};var privacyHandler=function privacyHandler(){window.open(\"https://diracai.com/privacy-policy/\",\"_blank\");};return/*#__PURE__*/_jsxs(\"div\",{className:classes.registerParent,children:[/*#__PURE__*/_jsx(LoginHeader,{}),loginState===\"OTPsending\"&&/*#__PURE__*/_jsxs(\"div\",{className:classes.registerDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.titleDiv,children:[\" \",/*#__PURE__*/_jsx(\"h2\",{children:\"Sending OTP ... \"}),\" \"]}),/*#__PURE__*/_jsx(\"div\",{style:{margin:'auto'},children:/*#__PURE__*/_jsx(FadeLoader,{color:color,loading:true,css:override,size:50})})]}),loginState===\"OTPnotrequested\"&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:classes.registerDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.titleDiv,children:[\" \",/*#__PURE__*/_jsx(\"h2\",{children:\" Login \"}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.phoneNumberDiv,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.phonetitle,children:\"Enter mobile number \"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.enterPhoneDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.countryCodes,children:[/*#__PURE__*/_jsx(\"img\",{alt:\"India\",className:classes.inflag,src:\"https://purecatamphetamine.github.io/country-flag-icons/3x2/IN.svg\"}),/*#__PURE__*/_jsx(\"i\",{children:\" +91\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",max:\"9\",min:\"0\",onChange:handleChangeUserName,name:\"username\",placeholder:\"Enter mobile number\",className:classes.usernameInput,value:UsernameValue})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.phonetnc,children:/*#__PURE__*/_jsxs(\"span\",{children:[\" By continuing, you agree to our\",/*#__PURE__*/_jsx(\"span\",{style:{color:\"var(--themeColor)\",cursor:\"pointer\"},onClick:TnSHandler,children:\" Terms of Service \"}),\"and  \",/*#__PURE__*/_jsx(\"span\",{style:{color:\"var(--themeColor)\",cursor:\"pointer\"},onClick:privacyHandler,children:\" Privacy Policy \"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.switchMethodDiv,children:\"  \"}),/*#__PURE__*/_jsx(\"div\",{className:classes.submitButtonDiv,children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:handleSubmitGetOTP,className:classes.sendOTPButton,style:buttonStyle,children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Send OTP\"}),\"  \"]})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:classes.linkToAccountCreation,onClick:createAccountPageHandler,children:\"Don't have an account? Create one here\"})]})}),loginState===\"OTPsent\"&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:classes.registerDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.titleDiv,children:[\" \",/*#__PURE__*/_jsx(\"h2\",{children:\" Login \"}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.phoneNumberDiv,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.phonetitle,children:\"Enter OTP \"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.enterOTPDiv,children:[/*#__PURE__*/_jsx(OTPinputUnit,{handleChangeOTP:handleChangeOTP,name:\"first\",inputRef:inputRef1}),/*#__PURE__*/_jsx(OTPinputUnit,{handleChangeOTP:handleChangeOTP,name:\"second\",inputRef:inputRef2}),/*#__PURE__*/_jsx(OTPinputUnit,{handleChangeOTP:handleChangeOTP,name:\"third\",inputRef:inputRef3}),/*#__PURE__*/_jsx(OTPinputUnit,{handleChangeOTP:handleChangeOTP,name:\"fourth\",inputRef:inputRef4}),/*#__PURE__*/_jsx(OTPinputUnit,{handleChangeOTP:handleChangeOTP,name:\"fifth\",inputRef:inputRef5})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.phonetnc,children:/*#__PURE__*/_jsxs(\"span\",{children:[\" By continuing, you agree to our\",/*#__PURE__*/_jsx(\"span\",{style:{color:\"var(--themeColor)\",cursor:\"pointer\"},onClick:TnSHandler,children:\" Terms of Service \"}),\"and  \",/*#__PURE__*/_jsx(\"span\",{style:{color:\"var(--themeColor)\",cursor:\"pointer\"},onClick:privacyHandler,children:\" Privacy Policy \"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.switchMethodDiv,children:\"  \"}),/*#__PURE__*/_jsx(\"div\",{className:classes.submitButtonDiv,children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:handleSubmitOTP,className:classes.sendOTPButton,style:buttonStyleOTP,children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Submit OTP\"}),\"  \"]})})]})})]});};export default Login;","map":{"version":3,"sources":["/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/src/CommonApps/LoginNew.js"],"names":["React","useState","CSSProperties","useRef","axiosInstance","classes","LoginHeader","useHistory","changepassword","FadeLoader","OTPinputUnit","override","display","margin","borderColor","useFocus","htmlElRef","setFocus","current","focus","Login","props","history","loadedUsername","String","phoneNum","replace","UsernameValue","setUsernameValue","color","initialFormData","Object","freeze","username","email","password","formData","updateFormData","length","backgroundColor","buttonStyle","setButtonStyle","buttonStyleOTP","setButtonStyleOTP","loginState","setLoginState","inputRef1","setInputFocus1","inputRef2","setInputFocus2","inputRef3","setInputFocus3","inputRef4","setInputFocus4","inputRef5","setInputFocus5","handleChangeUserName","event","target","value","name","trim","handleSubmitOTP","e","preventDefault","first","second","third","fourth","fifth","alert","post","then","res","localStorage","setItem","data","access","refresh","defaults","headers","getItem","setLoggedIn","location_","window","location","href","includes","handleSubmitGetOTP","handleChangeOTP","createAccountPageHandler","push","TnSHandler","open","privacyHandler","registerParent","registerDiv","titleDiv","phoneNumberDiv","phonetitle","enterPhoneDiv","countryCodes","inflag","usernameInput","phonetnc","cursor","switchMethodDiv","submitButtonDiv","sendOTPButton","linkToAccountCreation","enterOTPDiv"],"mappings":"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","sourcesContent":["import React, { useState,CSSProperties, useRef } from 'react';\nimport axiosInstance from '../axios';\n//import { Link } from 'react-router-dom';\n//import classes from \"./Login.module.css\"\nimport classes from './Register.module.css';\nimport LoginHeader from \"./LoginHeader\";\n//import LoginFooter from \"./LoginFooter\";\n//import logoImage from './BWlogo.JPG'\nimport { useHistory } from \"react-router-dom\";\nimport {changepassword} from './AllAPICalls';\nimport FadeLoader from \"react-spinners/FadeLoader\";\nimport OTPinputUnit from './OTPinputUnit';\n\n\n\nconst override: CSSProperties = {\n  display: \"block\",\n  margin: \"0 auto\",\n  borderColor: \"red\",\n};\n\n\n\nconst useFocus = () => {\n    const htmlElRef = useRef(null)\n    const setFocus = () => {htmlElRef.current &&  htmlElRef.current.focus()}\n    return [ htmlElRef, setFocus ] \n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst Login =(props)=> {\n\n\n    const history = useHistory();\n\n    let loadedUsername=String(props.loadedUsername);\n    let phoneNum=loadedUsername.replace('+91', '');       \n    const [UsernameValue, setUsernameValue] = useState(phoneNum);\n\n    let color=\"var(--themeColor);\";\n    const initialFormData = Object.freeze({\n\t        username:loadedUsername,\n\t\temail: '',\n\t\tpassword: '',\n\t});\n\n    const [formData, updateFormData] = useState(initialFormData);\n\n\n    const [buttonStyle, setButtonStyle]= useState(loadedUsername.length <9?\n\t    {  color:'grey',\n               backgroundColor:'lightgrey'\n             }:\n             {\n               color:'white',\n               backgroundColor:'var(--themeColor)'\n             }\n   \n      );\n\n\n    const [buttonStyleOTP, setButtonStyleOTP]= useState({ \n      color:'grey',\n      backgroundColor:'lightgrey'\n\n    });\n\n    const [loginState, setLoginState] = useState(\"OTPnotrequested\");\n\n    const [inputRef1, setInputFocus1] = useFocus();\n    const [inputRef2, setInputFocus2] = useFocus();\n    const [inputRef3, setInputFocus3] = useFocus();\n    const [inputRef4, setInputFocus4] = useFocus();\n    const [inputRef5, setInputFocus5] = useFocus();\t\n\n\n\n\n\n    const handleChangeUserName = (event) => {\n       setUsernameValue(event.target.value);\n\n        updateFormData({\n                        ...formData,\n                        [event.target.name]: event.target.value.trim(),\n                });\n\n\n\n        if(event.target.value.length===10 || UsernameValue.length===10){\n           setButtonStyle({\n            color:'white',\n            backgroundColor:'var(--themeColor)'\n           });\n        }else{\n        setButtonStyle({\n            color:'grey',\n            backgroundColor:'lightgrey'\n           });\n\n        }\n\n    }\n\n\n    const handleSubmitOTP = (e) => {\n\t\te.preventDefault();\n\n               if( \n\t\t  !((\"first\" in formData) && (formData.first !==\"\")) ||\n                  !((\"second\" in formData) && (formData.second !==\"\") )||\n\t\t  !((\"third\" in formData) && (formData.third !==\"\"))||\n\t\t  !((\"fourth\" in formData) && (formData.fourth !==\"\"))||\n\t\t  !((\"fifth\" in formData) && (formData.fifth !==\"\"))     \n\n\t         ){alert(\"fill all the boxes \");} \n                \n \n\t\t formData[\"password\"]= String(formData.first)+\n\t\t            String(formData.second)+String(formData.third)+String(formData.fourth)+String(formData.fifth);\n\n\n\t\t axiosInstance.post(`token/`, {username: formData.username,password: \"OLsbd!@#45\"+formData.password,})\n\t\t\t.then((res) => {\n\t\t\t\tlocalStorage.setItem('access_token', res.data.access);\n\t\t\t\tlocalStorage.setItem('refresh_token', res.data.refresh);\n\t\t\t\taxiosInstance.defaults.headers['Authorization'] =\n\t\t\t\t\t'JWT ' + localStorage.getItem('access_token');\n\t\t\t\tprops.setLoggedIn(true);\n\t\t\t\tlet location_=window.location.href;\n\t\t\t\tif(location_.includes(\"createaccount\")){\n\t\t\t\t  window.location.href=\"https://app.diracai.com/dashboard/general/courses\"\t\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t});\n\t};   \n\n\n\n\n\n\n    const handleSubmitGetOTP=(e)=>{\n       e.preventDefault();\n       if( !(formData.username.includes(\"+91\")) && (formData.username.length !==10) ){\n           alert(\"Enter a 10 digit number\");\n       }\n\n       if( (formData.username.includes(\"+91\")) && (formData.username.length !==13) ){\n           alert(\"Enter a 10 digit number\");\n       }\n\n\n\n       if(!(formData.username.includes(\"+91\"))){\n\n         formData['username']=\"+91\"+formData.username;\n\n       }\n\n       if(formData.username.length === 13 ){\n          setLoginState(loginState=>\"OTPsending\");\n          changepassword({formData, setLoginState});\n       }\n\n    } \n\n    const handleChangeOTP=(e)=>{\n     updateFormData({\n                        ...formData,\n                        [e.target.name]: e.target.value.trim(),\n                });\n\n     //setInputFocus();\n     if(e.target.name===\"first\"){setInputFocus2()}\n     if(e.target.name===\"second\"){setInputFocus3()}\n     if(e.target.name===\"third\"){setInputFocus4()}\n     if(e.target.name===\"fourth\"){setInputFocus5()}\t   \n\n\n     if(\n         e.target.name===\"fifth\"\n       ){\n\n          setButtonStyleOTP({\n            color:'white',\n            backgroundColor:'var(--themeColor)'\n           });\n       }\n    }\n\n\n\n    const createAccountPageHandler=()=>{\n\n      history.push('/createaccount');\n\n    }\n\n\n    const TnSHandler=()=>{\n\n      window.open(\"https://diracai.com/terms-conditions/\", \"_blank\");\n\n    }\n\n\n    const privacyHandler=()=>{\n\n      window.open(\"https://diracai.com/privacy-policy/\", \"_blank\");\n\n    }\n\n\n\n\n\n\n\n\n\n\n\nreturn (\n\n\n\n<div className={classes.registerParent}>\n  \n\n   <LoginHeader/>\n\n\n     { loginState===\"OTPsending\" &&\n          <div className={classes.registerDiv}>\n               <div className={classes.titleDiv}> <h2>Sending OTP ... </h2> </div>\n               <div style={{margin:'auto'}}>\n                   <FadeLoader color={color} loading={true} css={override} size={50}   />\n               </div>\n          </div>\n    }\n\n\n\n\n\n\n    \n   { loginState ===\"OTPnotrequested\" && <>\n\n\n     <div className={classes.registerDiv}>\n\n\n      <div className={classes.titleDiv}> <h2> Login </h2> </div> \n\n\n\n      <div className={classes.phoneNumberDiv}>\n         <div className={classes.phonetitle}>Enter mobile number </div>\n\n         <div className={classes.enterPhoneDiv}>\n\n          <div className={classes.countryCodes}>\n\n            <img\n               alt=\"India\"\n               className={classes.inflag}\n               src=\"https://purecatamphetamine.github.io/country-flag-icons/3x2/IN.svg\"/>\n               <i> +91</i>\n\n          </div>\n\n           <input\n             type=\"number\"\n\t     max=\"9\" \n\t     min=\"0\"\n             onChange={handleChangeUserName}\n             name=\"username\"\n             placeholder=\"Enter mobile number\"\n             className={classes.usernameInput}\n             value={UsernameValue}\t     \n          />\n\n\n\n       </div>\n\n       <div className={classes.phonetnc}>\n              <span> By continuing, you agree to our\n                                  <span style={{color:\"var(--themeColor)\", cursor: \"pointer\"}} onClick={TnSHandler}> Terms of Service </span>\n                             and  <span style={{color:\"var(--themeColor)\", cursor: \"pointer\"}} onClick={privacyHandler}> Privacy Policy </span>\n              </span>\n       </div>\n     </div>\n\n    <div className={classes.switchMethodDiv}>  </div>\n\n\n     <div className={classes.submitButtonDiv}>\n\n           <button type=\"button\" onClick={handleSubmitGetOTP} className={classes.sendOTPButton} style={buttonStyle}> <b>Send OTP</b>  </button>\n\n     </div>\n     \n     <button type=\"button\" className={classes.linkToAccountCreation} onClick={createAccountPageHandler}>\n      Don't have an account? Create one here \n     </button>\t\n     \n\n\t\t   \n\n\n\n    </div>\n    </>\n    }\n\n\n\n    { loginState===\"OTPsent\" && <>\n\n\n       <div className={classes.registerDiv}>\t\t    \n\n       <div className={classes.titleDiv}> <h2> Login </h2> </div>\n\n\n \n       <div className={classes.phoneNumberDiv}>\n           <div className={classes.phonetitle}>Enter OTP </div>\n\n           <div className={classes.enterOTPDiv}>\n\n           \n\n\t     <OTPinputUnit handleChangeOTP={handleChangeOTP} name=\"first\" inputRef={inputRef1}/>\t     \n\t     <OTPinputUnit handleChangeOTP={handleChangeOTP} name=\"second\" inputRef={inputRef2}/>\n\t     <OTPinputUnit handleChangeOTP={handleChangeOTP} name=\"third\" inputRef={inputRef3}/>\t    \n             <OTPinputUnit handleChangeOTP={handleChangeOTP} name=\"fourth\" inputRef={inputRef4}/>\n             <OTPinputUnit handleChangeOTP={handleChangeOTP} name=\"fifth\" inputRef={inputRef5}/>\n              \n\n\n\n\n\n\n\n\n\n\n\n\n           </div>\n\n\n         <div className={classes.phonetnc}>\n\t      <span> By continuing, you agree to our\n                                  <span style={{color:\"var(--themeColor)\", cursor: \"pointer\"}} onClick={TnSHandler}> Terms of Service </span>\n                             and  <span style={{color:\"var(--themeColor)\", cursor: \"pointer\"}} onClick={privacyHandler}> Privacy Policy </span>\n              </span>\n\n\t </div>\n\n\n       </div>\n\n\n\n       <div className={classes.switchMethodDiv}>  </div>\n\n\n        <div className={classes.submitButtonDiv}>\n\n           <button type=\"button\" onClick={handleSubmitOTP} className={classes.sendOTPButton} style={buttonStyleOTP}> <b>Submit OTP</b>  </button>\n\n\n       </div>\n\n\n\n\n\n\n       </div>\n\n\n    </>\n\n   }\n\n\n</div>\n\n);\n\n\n\n\n\n\n}\n\nexport default Login;\n\n\n"]},"metadata":{},"sourceType":"module"}