{"ast":null,"code":"import _defineProperty from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,CSSProperties}from\"react\";import LoginHeader from\"./LoginHeader\";import classes from'./Register.module.css';//import {OptionField} from './OptionField';\nimport{createaccountwithmobileno,checkuserexist}from'./AllAPICalls';import FadeLoader from\"react-spinners/FadeLoader\";import{BsCheckLg}from'react-icons/bs';//import { useHistory } from \"react-router-dom\";\nimport Login from'./LoginNew';import basewebURL from'../basewebURL';import ReCAPTCHA from'react-google-recaptcha';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var override={display:\"block\",margin:\"0 auto\",borderColor:\"red\"};var Register=function Register(){var _useState=useState(\"notcreated\"),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];//const history = useHistory(); \t\nvar color=\"var(--themeColor);\";var initialFormData=Object.freeze({username:'',usertype:'',usernamelength:8});var _useState3=useState(initialFormData),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],updateFormData=_useState4[1];var _useState5=useState({color:'grey',backgroundColor:'lightgrey'}),_useState6=_slicedToArray(_useState5,2),buttonStyle=_useState6[0],setButtonStyle=_useState6[1];var handleChangeUserName=function handleChangeUserName(event){updateFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},event.target.name,event.target.value.trim())));if(event.target.value.length===10){setButtonStyle({color:'white',backgroundColor:'var(--themeColor)'});}else{setButtonStyle({color:'grey',backgroundColor:'lightgrey'});}};var handleChangeUserType=function handleChangeUserType(event){updateFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},event.target.name,event.target.value.trim())));};var handleSubmit=function handleSubmit(){if(formData.username.length!==10){alert(\"Enter a 10 digit number\");}if(formData.usertype===\"\"){alert(\"Please select usertype\");}if(userExists){alert(\"Try a different number\");}if(!captchaResult){alert(\"Check the captcha\");}if(formData.username.length===10&&!userExists&&formData.usertype!==\"\"&&captchaResult){formData['username']=\"+91\"+formData.username;setLoading(function(loading){return\"creating\";});createaccountwithmobileno({formData:formData,setLoading:setLoading});}};var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),userExists=_useState8[0],setUserExists=_useState8[1];useEffect(function(){var username=\"+91\"+formData.username;checkuserexist({setUserExists:setUserExists,username:username});},[formData.username]);//let classRank=[\"+91\",\"+353\",\"+49\"]\n//<OptionField handleChange={handleChange}  label=\"+91\" name=\"countrycode\"  options={classRank}/>\nvar _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),login=_useState10[0],setLogin=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),loggedIn=_useState12[0],setLoggedIn=_useState12[1];var handleRedirectLogin=function handleRedirectLogin(){//history.push(`/dashboard/general/`);\nsetLogin(true);};var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),captchaResult=_useState14[0],setCaptchaResult=_useState14[1];var onChangeCaptchaHandler=function onChangeCaptchaHandler(value){//console.log('Captcha value:', value);\nfetch(\"\".concat(basewebURL,\"/api/verifycaptcha/\"),{method:'POST',body:JSON.stringify({'captcha_value':value}),headers:{'Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(data){//console.log(\"captcha value: \",data.captcha.success)\nsetCaptchaResult(data.captcha.success);});};var TnSHandler=function TnSHandler(){window.open(\"https://diracai.com/terms-conditions/\",\"_blank\");};var privacyHandler=function privacyHandler(){window.open(\"https://diracai.com/privacy-policy/\",\"_blank\");};return/*#__PURE__*/_jsxs(\"div\",{className:classes.registerParent,children:[!login&&/*#__PURE__*/_jsx(LoginHeader,{}),loading===\"creating\"&&/*#__PURE__*/_jsxs(\"div\",{className:classes.registerDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.titleDiv,children:[\" \",/*#__PURE__*/_jsx(\"h2\",{children:\"Creating ... \"}),\" \"]}),/*#__PURE__*/_jsx(\"div\",{style:{margin:'auto'},children:/*#__PURE__*/_jsx(FadeLoader,{color:color,loading:true,css:override,size:50})})]}),loading===\"created\"&&!login&&/*#__PURE__*/_jsxs(\"div\",{className:classes.registerDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.titleDiv,children:[\" \",/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(BsCheckLg,{style:{color:\"green\"}}),\" Account created successfully! \"]}),\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:classes.submitButtonDiv,children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:handleRedirectLogin,className:classes.sendOTPButton,style:buttonStyle,children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Proceed to Login\"}),\"  \"]})})]}),login&&/*#__PURE__*/_jsx(Login,{setLoggedIn:setLoggedIn,loadedUsername:formData.username}),loading===\"notcreated\"&&/*#__PURE__*/_jsxs(\"div\",{className:classes.registerDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.titleDiv,children:[\" \",/*#__PURE__*/_jsx(\"h2\",{children:\"Create an account\"}),\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:classes.switchMethodDiv,children:\"  \"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.phoneNumberDiv,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.phonetitle,children:\"Enter mobile number \"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.enterPhoneDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.countryCodes,children:[/*#__PURE__*/_jsx(\"img\",{alt:\"India\",className:classes.inflag,src:\"https://purecatamphetamine.github.io/country-flag-icons/3x2/IN.svg\"}),/*#__PURE__*/_jsx(\"i\",{children:\" +91\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:handleChangeUserName,name:\"username\",placeholder:\"Enter mobile number\",className:classes.usernameInput})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.phonetnc,children:/*#__PURE__*/_jsxs(\"span\",{children:[\" By continuing, you agree to our\",/*#__PURE__*/_jsx(\"span\",{style:{color:\"var(--themeColor)\",cursor:\"pointer\"},onClick:TnSHandler,children:\" Terms of Service \"}),\"and  \",/*#__PURE__*/_jsx(\"span\",{style:{color:\"var(--themeColor)\",cursor:\"pointer\"},onClick:privacyHandler,children:\" Privacy Policy \"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.switchMethodDiv,style:{color:\"red\"},children:[\" \",userExists?\"user with this number already exists\":\"\",\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.usertypeDiv,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.chooseUserTypeTitle,children:\" Choose your role  \"}),/*#__PURE__*/_jsx(\"div\",{className:classes.userTypeOptions,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.userTypeOptionsInner,children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"1\",name:\"usertype\",className:classes.radioButton,onChange:handleChangeUserType}),\"Teacher\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"2\",name:\"usertype\",className:classes.radioButton,onChange:handleChangeUserType}),\"Student\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"3\",name:\"usertype\",className:classes.radioButton,onChange:handleChangeUserType}),\"Owner/Manager\"]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.submitButtonDiv,children:/*#__PURE__*/_jsx(ReCAPTCHA,{sitekey:\"6LdtMAghAAAAAGLqRpJ0hMuAWK4X15_zQfbvBuX-\",onChange:onChangeCaptchaHandler})}),/*#__PURE__*/_jsx(\"div\",{className:classes.submitButtonDiv,children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:handleSubmit,className:classes.sendOTPButton,style:buttonStyle,children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Create\"}),\"  \"]})})]})]});};export default Register;","map":null,"metadata":{},"sourceType":"module"}