{"ast":null,"code":"import _slicedToArray from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import classes from'./CourseSyllabus.module.css';import{getsyllabusfromId,putsectiondata,createnewsection,deletesectiondata}from'../../../CommonApps/AllAPICalls.js';import AddChapterButton from'./AddChapterButton';import SectionIter from'./SectionIter';import AddSectionButton from'./AddSectionButton';import ChapterCreationForm from'./ChapterCreationForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CourseSyllabus=function CourseSyllabus(props){var _useState=useState({\"chapters\":[]}),_useState2=_slicedToArray(_useState,2),syllabusData=_useState2[0],getSyllabusData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),rerender=_useState4[0],setRerender=_useState4[1];var syllabusId=props.selectedCourse[0].syllabus;useEffect(function(){getsyllabusfromId({syllabusId:syllabusId,getSyllabusData:getSyllabusData});return function(){getSyllabusData(function(syllabusData){return{\"chapters\":[]};});};},[syllabusId,rerender]);//console.log(\"syllabus Data: \", syllabusData);\n/*const [showSyllabus, changeShowSyllabus]=useState(true);\n\n    const showSyllabusHandler = ()=>{\n      changeShowSyllabus(true);\n    }\n\n\n    const hideSyllabusHandler = ()=>{\n       changeShowSyllabus(false);\n    }\n    */var _useState5=useState({chapterId:0,sectionId:0}),_useState6=_slicedToArray(_useState5,2),showSectionEdit=_useState6[0],setShowSectionEdit=_useState6[1];/*const [sectionEditStyle, setSectionEditStyle] = useState({\n\n\t    borderStyle: 'none',\n            borderWidth: '1px',\n            borderColor: 'lightgrey',\n            margin: '10px'\n\n    });*/var sectionEditStyle={borderStyle:'none',borderWidth:'1px',borderColor:'lightgrey',margin:'10px'};var editSectionHandler=function editSectionHandler(_ref){var chapterId=_ref.chapterId,sectionId=_ref.sectionId;//console.log(\"edit chapterId, sectionid : \",chapterId,'--',sectionId);\nsetShowSectionEdit({chapterId:chapterId,sectionId:sectionId});};var _addSectionHandler=function addSectionHandler(_ref2){var chapterId=_ref2.chapterId;//console.log(\"create new section: \",chapterId );\t  \nvar sectionPostData={\"name\":\"New Section\",\"chapterid\":chapterId};createnewsection({sectionPostData:sectionPostData});setRerender(function(rerender){return!rerender;});};var deleteSectionHandler=function deleteSectionHandler(_ref3){var sectionId=_ref3.sectionId;//console.log(\"delete button pressed\");\nvar sectionid=sectionId;deletesectiondata({sectionid:sectionid});setRerender(function(rerender){return!rerender;});};var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),onChangeSectionData=_useState8[0],setOnChangeSectionData=_useState8[1];var handleChange=function handleChange(event){var alltext=event.target.value;var topicnamesArray=alltext.split(\";\");var topicArray=[];for(var i=0;i<topicnamesArray.length;i++){var topicObj={};topicObj['name']=topicnamesArray[i];topicArray.push(topicObj);}setOnChangeSectionData(function(onChangeSectionData){return topicArray;});};var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),sectionText=_useState10[0],setSectionText=_useState10[1];//const sectionText = useMemo(() => {}, []);\n//const sectionText={};\t\nuseEffect(function(){var sectionData=\"\";syllabusData.chapters.forEach(function(chapter,cindex){chapter.sections.forEach(function(section,sindex){sectionData=\"\";section.topics.forEach(function(topic,tindex){sectionData=sectionData+topic.name;});var chapterId=chapter.id;var sectionId=section.id;var secName='c'+chapterId+'s'+sectionId;sectionText[secName]=sectionData;});});},[syllabusData,sectionText]);var SaveSectionHandler=function SaveSectionHandler(_ref4){var chapterId=_ref4.chapterId,sectionId=_ref4.sectionId;//console.log(\"chapterId, sectionId: \",chapterId,\"----\" ,sectionId);\nvar sectionid=sectionId;var topicData=onChangeSectionData;//console.log(\"topicData: \", topicData)\t   \nputsectiondata({sectionid:sectionid,topicData:topicData});setShowSectionEdit({chapterId:0,sectionId:0});setRerender(function(rerender){return!rerender;});};var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showChapterCreateForm=_useState12[0],setShowChapterCreateForm=_useState12[1];var addChapterHandler=function addChapterHandler(){//console.log(\"New chapter added\");\n//let chapterPostData = {\"name\":\"New Section\",\"chapternum\": };\n//createnewchapter({chapterPostData});\t    \nsetShowChapterCreateForm(true);};var closeChapterFormHandler=function closeChapterFormHandler(){setShowChapterCreateForm(false);};//console.log(\"showSectionEdit.chapterId:   \",showSectionEdit.chapterId,'---', showSectionEdit.sectionId);\nreturn/*#__PURE__*/_jsxs(\"div\",{className:classes.courseSyllabus,children:[/*#__PURE__*/_jsx(\"i\",{children:\" COURSE SYLLABUS:  \"}),syllabusData.length!==null&&/*#__PURE__*/_jsx(\"div\",{className:classes.syllabusContent,children:/*#__PURE__*/_jsxs(\"ol\",{className:classes.chapterNames,children:[/*#__PURE__*/_jsx(AddChapterButton,{addChapterHandler:addChapterHandler}),showChapterCreateForm&&/*#__PURE__*/_jsx(ChapterCreationForm,{onPress:closeChapterFormHandler,syllabusData:syllabusData}),syllabusData.chapters.map(function(chapter,index){var chapterId=chapter.id;return/*#__PURE__*/_jsxs(\"li\",{children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:chapter.name}),/*#__PURE__*/_jsxs(\"ol\",{children:[chapter.sections.map(function(section,sindex){//let sectionId = section.id;\nvar csname='c'+chapter.id+'s'+section.id;return/*#__PURE__*/_jsx(SectionIter,{sectionEditStyle:sectionEditStyle,showSectionEdit:showSectionEdit,chapter:chapter,section:section,editSectionHandler:editSectionHandler,deleteSectionHandler:deleteSectionHandler,SaveSectionHandler:SaveSectionHandler,csname:csname,handleChange:handleChange,sectionText:sectionText,sindex:sindex},sindex);}),/*#__PURE__*/_jsx(AddSectionButton,{addSectionHandler:function addSectionHandler(event){return _addSectionHandler({chapterId:chapterId});}})]})]},index);})]})})]});};export default CourseSyllabus;/*\n\n { !showSyllabus && <button onClick={showSyllabusHandler}> Show <BsChevronDoubleDown className={classes.ExpandSyllIcon}/>  </button> }\n\n        { showSyllabus && <button onClick={hideSyllabusHandler}> Hide <BsChevronDoubleUp className={classes.ExpandSyllIcon}/>  </button>}\n*/","map":null,"metadata":{},"sourceType":"module"}