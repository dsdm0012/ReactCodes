{"ast":null,"code":"var _jsxFileName = \"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/src/MainApps/Messages/VATChat/ChatWindow/ChatScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect } from \"react\";\nimport classes from \"./ChatScreen.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ChatScreen = props => {\n  _s();\n\n  const messages = props.messages;\n  const messagesEndRef = useRef(null);\n\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const commentTime = ({\n    datetime\n  }) => {\n    //let Datetime=datetime;\n    //var Datetime_ = new Date('2022-07-24 08:44:49  UTC');\n    //console.log(\"Datetime:\", datetime);\n    let date = datetime.split(\"T\").at(0);\n    let time_ = datetime.split(\"T\").at(1);\n    let timehour = datetime.split(\"T\").at(1).split(\":\").at(0);\n    let timemin = datetime.split(\"T\").at(1).split(\":\").at(1);\n    let timesec = datetime.split(\"T\").at(1).split(\":\").at(2);\n    let totalTime = timehour + \":\" + timemin + \":\" + timesec;\n    let timeFormat = date + \" \" + totalTime + \" \" + \"UTC\"; //console.log(\"datetime: \", timeFormat);\n\n    let DatetimeLocalFull = new Date(timeFormat);\n    let DatetimeLocalFullStr = String(DatetimeLocalFull);\n    let dayStr = DatetimeLocalFullStr.split(\" \").at(0);\n    let dateStr = DatetimeLocalFullStr.split(\" \").at(2);\n    let month = DatetimeLocalFullStr.split(\" \").at(1);\n    let fullTimeLocal = DatetimeLocalFullStr.split(\" \").at(4);\n    let fullTimeLocalStr = String(fullTimeLocal);\n    let localTimeHour = fullTimeLocalStr.split(\":\").at(0);\n    let localTimeMin = fullTimeLocalStr.split(\":\").at(1);\n    let ampm;\n\n    if (localTimeHour < 12) {\n      ampm = \"am\";\n    }\n\n    if (localTimeHour > 12) {\n      localTimeHour = localTimeHour - 12;\n      ampm = \"pm\";\n    }\n\n    let time = String(localTimeHour) + \":\" + String(localTimeMin) + String(ampm) + \", \" + String(dayStr) + \", \" + String(dateStr) + \" \" + String(month);\n    return time;\n  };\n\n  const currentTime = () => {\n    var now = new Date();\n    let timeInfo = String(now); //\"Sun Jul 24 2022 00:23:04 GMT-0700 (Pacific Daylight Time)\";\n    //console.log(\"Now time : \", ttime.split(\" \").at(0));\n\n    let dayStr = timeInfo.split(\" \").at(0);\n    let dateStr = timeInfo.split(\" \").at(2);\n    let month = timeInfo.split(\" \").at(1);\n    let time = timeInfo.split(\" \").at(4);\n    let timehour = time.split(\":\").at(0);\n    let timemin = time.split(\":\").at(1);\n    let ampm;\n\n    if (timehour < 12) {\n      ampm = \"am\";\n    }\n\n    if (timehour > 12) {\n      timehour = timehour - 12;\n      ampm = \"pm\";\n    }\n\n    let finaltime = String(timehour) + \":\" + String(timemin) + String(ampm) + \", \" + String(dayStr) + \", \" + String(dateStr) + \" \" + String(month);\n    return finaltime;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.chatScreen,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.dummyDiv1,\n      children: \"  Bibhuprasad   \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 6\n    }, this), props.commentObj !== null && props.commentObj.next !== null && /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      onClick: props.loadUpHandler,\n      children: \"Load Up\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 8\n    }, this), props.commentObj.slice(0).reverse().map((comment, index) => {\n      let datetime = comment.commenttime;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.comment,\n        children: [comment.commenter === props.currentUser && /*#__PURE__*/_jsxDEV(\"i\", {\n          className: classes.commentText,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\" \", comment.commenttext]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: classes.chatTime,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: classes.timeText,\n              children: [\"  \", commentTime({\n                datetime\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 12\n        }, this), comment.commenter !== props.currentUser && /*#__PURE__*/_jsxDEV(\"i\", {\n          className: classes.commentText,\n          style: {\n            backgroundColor: 'white',\n            float: 'left',\n            marginLeft: '100px',\n            boxShadow: 'rgba(99, 99, 99, 0.2) 0px 2px 8px 0px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\" \", comment.commenttext]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 30\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: classes.chatTime,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: classes.timeText,\n              children: [\"  \", commentTime({\n                datetime\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 34\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 30\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 24\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 23\n      }, this);\n    }), props.commentObj !== null && props.commentObj.previous !== null && /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      onClick: props.loadDownHandler,\n      children: \"Load Down\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 12\n    }, this), messages.map((message, index) => {\n      let allMsg = message.split(\" \");\n      let userId = allMsg[allMsg.length - 2];\n      let fullMsg = allMsg;\n      let Msg1 = fullMsg.splice(allMsg.length - 1, 1);\n      let Msg2 = fullMsg.splice(allMsg.length - 1, 1); //let displayMsg1 = allMsg.pop();\n      //let displayMsg2 = allMsg.pop(); \n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.comment,\n        children: [Number(userId) === props.currentUser && /*#__PURE__*/_jsxDEV(\"i\", {\n          className: classes.commentText,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\" \", fullMsg.join(\" \")]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 31\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: classes.chatTime,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: classes.timeText,\n              children: [\"  \", currentTime()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 34\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 31\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 27\n        }, this), Number(userId) !== props.currentUser && /*#__PURE__*/_jsxDEV(\"i\", {\n          className: classes.commentText,\n          style: {\n            backgroundColor: 'white',\n            float: 'left',\n            marginLeft: '100px',\n            boxShadow: 'rgba(99, 99, 99, 0.2) 0px 2px 8px 0px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\" \", fullMsg.join(\" \")]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 30\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: classes.chatTime,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: classes.timeText,\n              children: [\"  \", currentTime()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 34\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 30\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 27\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 23\n      }, this);\n    }), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.dummyDiv,\n      ref: messagesEndRef,\n      children: \"   \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 6\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 1\n  }, this);\n};\n\n_s(ChatScreen, \"0epSoi03NVSoD0I0FiLK4iVNXOA=\");\n\n_c = ChatScreen;\nexport default ChatScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatScreen\");","map":{"version":3,"sources":["/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/src/MainApps/Messages/VATChat/ChatWindow/ChatScreen.js"],"names":["React","useRef","useEffect","classes","ChatScreen","props","messages","messagesEndRef","scrollToBottom","current","scrollIntoView","behavior","commentTime","datetime","date","split","at","time_","timehour","timemin","timesec","totalTime","timeFormat","DatetimeLocalFull","Date","DatetimeLocalFullStr","String","dayStr","dateStr","month","fullTimeLocal","fullTimeLocalStr","localTimeHour","localTimeMin","ampm","time","currentTime","now","timeInfo","finaltime","chatScreen","dummyDiv1","commentObj","next","loadUpHandler","slice","reverse","map","comment","index","commenttime","commenter","currentUser","commentText","commenttext","chatTime","timeText","backgroundColor","float","marginLeft","boxShadow","previous","loadDownHandler","message","allMsg","userId","length","fullMsg","Msg1","splice","Msg2","Number","join","dummyDiv"],"mappings":"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","sourcesContent":["import React,{useRef,useEffect} from \"react\";\nimport classes from \"./ChatScreen.module.css\";\n\n\nconst ChatScreen=(props)=>{\n\n\nconst messages=props.messages;\n\n    const messagesEndRef = useRef(null);\n\n    const scrollToBottom = () => {\n       messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\n    }\n\n\n\n    useEffect(() => {\n      scrollToBottom();\n    }, [messages]);\n\n\n   const commentTime=({datetime})=>{\n     //let Datetime=datetime;\n\n     //var Datetime_ = new Date('2022-07-24 08:44:49  UTC');\n     \n     //console.log(\"Datetime:\", datetime);\n      \n\n\n     let date= datetime.split(\"T\").at(0);\n     let time_ = datetime.split(\"T\").at(1);\n\n\n     let timehour=datetime.split(\"T\").at(1).split(\":\").at(0);\t   \n     let timemin=datetime.split(\"T\").at(1).split(\":\").at(1);\n     let timesec=datetime.split(\"T\").at(1).split(\":\").at(2);\n     \n     let totalTime=timehour+\":\"+timemin+\":\"+timesec;\n\n     let timeFormat =  date+\" \"+totalTime+\" \"+\"UTC\";\n\n     //console.log(\"datetime: \", timeFormat);\n    \n     let DatetimeLocalFull = new Date(timeFormat);\n\n    \n     let DatetimeLocalFullStr= String(DatetimeLocalFull);\n    \n     let dayStr=DatetimeLocalFullStr.split(\" \").at(0);\n     let dateStr=DatetimeLocalFullStr.split(\" \").at(2);\n     let month= DatetimeLocalFullStr.split(\" \").at(1);\t   \n\n     let fullTimeLocal = DatetimeLocalFullStr.split(\" \").at(4);\n    \n     let fullTimeLocalStr = String(fullTimeLocal);\n\n     let localTimeHour = fullTimeLocalStr.split(\":\").at(0);\n     let localTimeMin = fullTimeLocalStr.split(\":\").at(1);\t   \n     \n\n\n     let ampm;\n     if(localTimeHour < 12){\n      ampm=\"am\";\n     }\t   \n     if(localTimeHour > 12){\n       localTimeHour=localTimeHour-12;\n       ampm=\"pm\"\t     \n     }\n\n     let time=String(localTimeHour)+\":\"+String(localTimeMin)+String(ampm)+\", \"+String(dayStr)+\", \"+String(dateStr)+\" \"+String(month);\n     \n     return time;\n\n   }\n\n   const currentTime=()=>{\n   var now = new Date();\n\n   let timeInfo=String(now);\n   //\"Sun Jul 24 2022 00:23:04 GMT-0700 (Pacific Daylight Time)\";\n\n   //console.log(\"Now time : \", ttime.split(\" \").at(0));\n  \n     let dayStr=timeInfo.split(\" \").at(0);\n     let dateStr=timeInfo.split(\" \").at(2);\n     let month= timeInfo.split(\" \").at(1);\n\n\n\n\n\n\n   let time=timeInfo.split(\" \").at(4);\n   let timehour = time.split(\":\").at(0);\n   let timemin = time.split(\":\").at(1);\t\n   let ampm;\n   if(timehour < 12){\n      ampm=\"am\";\n     }\n     if(timehour > 12){\n       timehour=timehour-12;\n       ampm=\"pm\"\n     }\n\n     let finaltime=String(timehour)+\":\"+String(timemin)+String(ampm)+\", \"+String(dayStr)+\", \"+String(dateStr)+\" \"+String(month);\n     return finaltime;\t   \n   \n\n   }\t\n\n\n\n\n\n\n\n\n\n\nreturn(\n\n<div className={classes.chatScreen}>\n\n\n     <div className={classes.dummyDiv1}>  Bibhuprasad   </div>\n     \n       { props.commentObj !==null && props.commentObj.next !==null &&\t\n       <button type=\"button\" onClick={props.loadUpHandler}>\n\n\t  Load Up\n\n       </button>\t\n       }\n\n      {props.commentObj.slice(0).reverse().map((comment,index)=>{\n\n\n               let datetime=comment.commenttime;\n\n               return <div  key={index} className={classes.comment} >  \n\t\t      \n\t\t      {comment.commenter === props.currentUser &&\n\t\t         <i className={classes.commentText}>\n\t\t\t     <span> {comment.commenttext}</span>\n\t\t\t     <span className={classes.chatTime}> \n\t\t\t         <span className={classes.timeText}>  {commentTime({datetime})}</span>\n\t\t\t     </span>\n\t\t\t</i> \n                      }\n\n                      {comment.commenter !== props.currentUser &&\n\n                       <i className={classes.commentText} style={{backgroundColor: 'white', float: 'left',marginLeft: '100px',boxShadow: 'rgba(99, 99, 99, 0.2) 0px 2px 8px 0px'}}>\n\n\t\t\t\t     \n\n                             <span> {comment.commenttext}</span>\n                             <span className={classes.chatTime}>\n                                 <span className={classes.timeText}>  {commentTime({datetime})}</span>\n                             </span>\n\n\n\n\t\t       </i>\n\n                      }\n\n\t\t      </div>\n                \n\n\n\n           }\n\n        )}\n\n\n\n        { props.commentObj !==null && props.commentObj.previous !==null &&\n           <button type=\"button\" onClick={props.loadDownHandler}>\n\n                   Load Down\n\n           </button>\n        }\n\n\n\n\n\n\n\n\n\n\n\n         { messages.map((message,index)=>{\n\n               let allMsg = message.split(\" \");\n\t\t\n\n\t       let userId = allMsg[allMsg.length-2];\t\n\n               let fullMsg=allMsg;\n\n               let Msg1 = fullMsg.splice(allMsg.length-1, 1);\n\t       let Msg2 = fullMsg.splice(allMsg.length-1, 1);\t \n\n\t       //let displayMsg1 = allMsg.pop();\n\t       //let displayMsg2 = allMsg.pop(); \n\n               return <div key={index} className={classes.comment}>   \n\n\n                     { Number(userId) === props.currentUser &&\n\n                          <i className={classes.commentText}>  \n\t\t\t     \n                              <span> {fullMsg.join(\" \")}</span>\n                              <span className={classes.chatTime}>\n                                 <span className={classes.timeText}>  {currentTime()}</span>\n                              </span>\n\n\n\t\t\t  </i>\n\n                     }\n\n\n                     { Number(userId) !== props.currentUser &&\n\n                          <i className={classes.commentText} style={{backgroundColor: 'white', float: 'left',marginLeft: '100px',boxShadow: 'rgba(99, 99, 99, 0.2) 0px 2px 8px 0px'}}>  \n\t\t\t\t      \n\n                             <span> {fullMsg.join(\" \")}</span>\n                             <span className={classes.chatTime}>\n                                 <span className={classes.timeText}>  {currentTime()}</span>\n                             </span>\n\n\n\n\n\n\n\n\t\t\t   </i>\n\n                     }\n\n\n\n\n\n\n\t\t      </div>\n\n           }\n\n        ) \n      } \n   \n\n\n     <div className={classes.dummyDiv} ref={messagesEndRef}>   </div>\t\n\n\n\n\n\n\n\n\n\n</div>\t\n);\n\n\n}\n\n\nexport default ChatScreen;\n"]},"metadata":{},"sourceType":"module"}