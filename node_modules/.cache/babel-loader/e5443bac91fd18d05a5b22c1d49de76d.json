{"ast":null,"code":"var _jsxFileName = \"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/src/MainApps/Chat/ChatNavBar/AddUser/LeftNewUserBoxContainer.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport classes from \"./LeftUserBoxContainer.module.css\";\nimport LeftNewUserBox from \"./LeftNewUserBox\"; //import classimg from '../../../../../images/groupImage.png';\n\nimport { createchatgroup, getfewusers, usersearchgeneral, checkifuseradded } from '../../../../CommonApps/AllAPICalls'; //import basewebURL from \"../../../../../basewebURL\";\n\nimport TopLeftSearchBarNewUser from \"./TopLeftSearchBarNewUser\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst LeftUserBoxContainer = props => {\n  _s();\n\n  // const [usersData, setUsersData ] = useState(props.usersData);\n  // const [data, setData]=useState(props.data );\n  const [searchedUsers, getSearchedUsers] = useState(null);\n  const [searchString, setSearchString] = useState(\"+91\");\n  const [userExists, setUserExists] = useState(false);\n  const [pageNo, setPageNo] = useState(1);\n  useEffect(() => {\n    //setUsersData(usersData=>props.usersData);\n    //setData(data=>props.data);    \n    //getfewusers({num, getFewUsers});\n    // console.log(\"string changed: \", searchString);\n    //let searchString1=\"Mahakud\";\t\n    let pageno = pageNo;\n    usersearchgeneral({\n      pageno,\n      searchString,\n      getSearchedUsers\n    });\n    return () => {\n      getSearchedUsers(searchedUsers => null);\n    };\n    getSearchedUsers(searchedUsers => null);\n  }, [searchString, pageNo]);\n\n  const createOneOOneGroup = _ref => {\n    let {\n      userId\n    } = _ref;\n    let groupMembers = [userId, props.userData.id];\n    const maxId = Math.max.apply(null, groupMembers);\n    const minId = Math.min.apply(null, groupMembers);\n    const groupname = 'a' + maxId + 'a' + minId + 'a';\n    createchatgroup({\n      groupname,\n      groupMembers\n    });\n  };\n\n  const createGroupHandler = userId => {\n    let guestId = userId;\n    checkifuseradded({\n      userId,\n      setUserExists,\n      createOneOOneGroup\n    });\n  }; //console.log(\"userExists: \", userExists !==null ? userExists.exists:\"Not Valid\");\n\n\n  const loadNextPageDataHandler = () => {\n    //console.log(\"more user data requested\");\n    setPageNo(pageNo => pageNo + 1);\n  };\n\n  const loadPrevPageDataHandler = () => {\n    //console.log(\"more user data requested\");\n    setPageNo(pageNo => pageNo - 1);\n  }; // const [y, setY] = useState(0);\n\n\n  const wheelHandler = () => {\n    /*\n    console.log('onWheel: scrolling the list...', window.scrollY);\n    if (y > window.scrollY) {\n    console.log(\"scrolling up\");\n    } else if (y < window.scrollY) {\n    console.log(\"scrolling down\");\n    }\n    setY(window.scrollY);\n    */\n  }; //console.log(\"search string:  \", searchString);\n  //console.log(\"searchedUser.results: \", searchedUsers);\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(TopLeftSearchBarNewUser, {\n      setSearchString: setSearchString,\n      setPageNo: setPageNo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.leftUserBoxContainer,\n      onWheel: wheelHandler,\n      children: [pageNo > 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: loadPrevPageDataHandler,\n        className: classes.loadMoreDataButton,\n        children: \"Load previous data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 6\n      }, this), searchedUsers !== null && searchedUsers.results !== null && searchedUsers.results.map((user, index) => {\n        return /*#__PURE__*/_jsxDEV(LeftNewUserBox, {\n          userImage: user.profile_image,\n          userName: user.firstname !== \"\" && user.lastname !== \"\" ? user.firstname + \" \" + user.lastname : user.username,\n          onPress: () => createGroupHandler(user.id)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 38\n        }, this);\n      }), searchedUsers !== null && searchedUsers.results !== null && searchedUsers.next !== null && /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: loadNextPageDataHandler,\n        className: classes.loadMoreDataButton,\n        children: \"Load more data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 1\n    }, this)]\n  }, void 0, true);\n};\n\n_s(LeftUserBoxContainer, \"dwBcaCb2ygKzdgmQPLWZBHuWkag=\");\n\n_c = LeftUserBoxContainer;\nexport default LeftUserBoxContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"LeftUserBoxContainer\");","map":{"version":3,"names":["React","useState","useEffect","classes","LeftNewUserBox","createchatgroup","getfewusers","usersearchgeneral","checkifuseradded","TopLeftSearchBarNewUser","LeftUserBoxContainer","props","searchedUsers","getSearchedUsers","searchString","setSearchString","userExists","setUserExists","pageNo","setPageNo","pageno","createOneOOneGroup","userId","groupMembers","userData","id","maxId","Math","max","apply","minId","min","groupname","createGroupHandler","guestId","loadNextPageDataHandler","loadPrevPageDataHandler","wheelHandler","leftUserBoxContainer","loadMoreDataButton","results","map","user","index","profile_image","firstname","lastname","username","next"],"sources":["/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/src/MainApps/Chat/ChatNavBar/AddUser/LeftNewUserBoxContainer.js"],"sourcesContent":["import React,{useState,useEffect} from \"react\";\nimport classes from \"./LeftUserBoxContainer.module.css\"\nimport LeftNewUserBox from \"./LeftNewUserBox\";\n//import classimg from '../../../../../images/groupImage.png';\nimport {createchatgroup,getfewusers, usersearchgeneral, checkifuseradded} from '../../../../CommonApps/AllAPICalls';\n\n//import basewebURL from \"../../../../../basewebURL\";\nimport TopLeftSearchBarNewUser from \"./TopLeftSearchBarNewUser\";\n\n\n\nconst LeftUserBoxContainer = (props) =>{\n\n\n   // const [usersData, setUsersData ] = useState(props.usersData);\n   // const [data, setData]=useState(props.data );\n   const [searchedUsers, getSearchedUsers] = useState(null)\n   const [searchString, setSearchString] =  useState(\"+91\");\n\n   const [userExists, setUserExists ] = useState(false);\n\n   const [pageNo , setPageNo] = useState(1);\n\n   useEffect(()=>{\n\n     //setUsersData(usersData=>props.usersData);\n     //setData(data=>props.data);    \n     //getfewusers({num, getFewUsers});\n     // console.log(\"string changed: \", searchString);\n     //let searchString1=\"Mahakud\";\t\n     let pageno=pageNo;\n     usersearchgeneral({pageno,searchString, getSearchedUsers});\n     return ()=>{\n         getSearchedUsers(searchedUsers=>null);\n\n        }\n\t \n\t getSearchedUsers(searchedUsers=>null);   \n\n   },[searchString,pageNo]);\n\n\n    const createOneOOneGroup=({userId})=>{\n      \n      \t    \n      \n      let groupMembers = [userId, props.userData.id]; \n      const maxId = Math.max.apply(null, groupMembers);\n      const minId = Math.min.apply(null, groupMembers);\n      const groupname='a'+maxId+'a'+minId+'a';\t    \n      createchatgroup({groupname,groupMembers});\n\n    }\n\n\n\n   const createGroupHandler = (userId) =>{\n\n     let guestId=userId;\t   \n     checkifuseradded({userId, setUserExists, createOneOOneGroup});\n\n   }\n\n\n  //console.log(\"userExists: \", userExists !==null ? userExists.exists:\"Not Valid\");\n\n\n   const loadNextPageDataHandler=()=>{\n     //console.log(\"more user data requested\");\n     setPageNo(pageNo=>pageNo+1); \n   }\n\n\n   const loadPrevPageDataHandler=()=>{\n     //console.log(\"more user data requested\");\n     setPageNo(pageNo=>pageNo-1);\n   }\n\n\n\n\n // const [y, setY] = useState(0);\n\n  const wheelHandler=()=>{/*\n\n    console.log('onWheel: scrolling the list...', window.scrollY);\n   if (y > window.scrollY) {\n      console.log(\"scrolling up\");\n    } else if (y < window.scrollY) {\n      console.log(\"scrolling down\");\n    }\n\n    setY(window.scrollY);\n\n\n  */}\n\n\n\n\n\n\n\n\n\n   //console.log(\"search string:  \", searchString);\n   //console.log(\"searchedUser.results: \", searchedUsers);\n\nreturn(\n\n\n<>\n\n<TopLeftSearchBarNewUser setSearchString={setSearchString}  setPageNo={setPageNo}/>\n\n<div className={classes.leftUserBoxContainer} onWheel={wheelHandler}>\n\n     { pageNo >1 &&\n     <button type=\"button\" onClick={loadPrevPageDataHandler} className={classes.loadMoreDataButton}>\n\n           Load previous data\n\n      </button>\n     }\n\n\n\n      {/* in future change this logic. This must interfere performance*/}\n\n      {/*usersData.filter(\n           function(user) {\n         if (user.id === data.id) {\n              return false; \n              }\n                  return true;\n             })\n\n\n            .map((user,index)=>{\n\n\t      \n             return    <LeftNewUserBox key={index} userImage={user.profile_image} \n\t\t                       userName={user.firstname !==\"\"  && user.lastname !==\"\"? user.firstname+\" \"+user.lastname: user.username} \n\t\t                       userType={user.usetype}\n\t\t                       onPress={()=>createGroupHandler(user.id)}   \n\t\t\t               />\n              \n\n           }\n\n      )*/}\n\n\n      { searchedUsers !==null && searchedUsers.results !==null &&\n\n\t\t      searchedUsers.results.map((user, index)=>{\n\n                           return    <LeftNewUserBox key={index} userImage={user.profile_image} \n                                       userName={user.firstname !==\"\"  && user.lastname !==\"\"? user.firstname+\" \"+user.lastname: user.username} \n                                       onPress={()=>createGroupHandler(user.id)}                                       \n                                          \n                                       />\n\n\n\n\t\t      })\n\n\n\n\n      }\n\n\n\n\n\n\n     { searchedUsers !==null && searchedUsers.results !==null && searchedUsers.next !==null &&\n\n      <button type=\"button\" onClick={loadNextPageDataHandler} className={classes.loadMoreDataButton}>\n           \n\t   Load more data\n\n      </button>\n\n     }\n\n\n</div>\n\n</>\n\n);\n\n}\n\nexport default LeftUserBoxContainer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}