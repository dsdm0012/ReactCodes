{"ast":null,"code":"import _slicedToArray from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import classes from\"./TicketViewWindow.module.css\";import TicketInfo from\"./TicketInfo\";import TicketDescription from\"./TicketDescription\";import TicketComments from\"./TicketComments\";import AddComment from\"./AddComment\";import{getcomments}from\"../../../CommonApps/AllAPICalls\";import EditTicketForm from'./Forms/EditTicketForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TicketViewWindow=function TicketViewWindow(props){var ticketId=localStorage.getItem('clickedDiscussionId');var _useState=useState(null),_useState2=_slicedToArray(_useState,2),commentObj=_useState2[0],setCommentObj=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),commentAdded=_useState4[0],setComAdded=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),editTicketForm=_useState6[0],setEditTicketForm=_useState6[1];useEffect(function(){getcomments({setCommentObj:setCommentObj,ticketId:ticketId});},[commentAdded,props.selectedTicket]);//console.log(\"commentObj: \", commentObj);\nvar showTicketEditFormHandler=function showTicketEditFormHandler(){setEditTicketForm(true);};var closeTicketEditForm=function closeTicketEditForm(){setEditTicketForm(false);props.rerender();};return/*#__PURE__*/_jsxs(\"div\",{className:classes.ticketViewWindow,children:[editTicketForm&&props.selectedCourse!==null&&Number(props.selectedTicket.author.id)===Number(props.userData.id)&&/*#__PURE__*/_jsx(EditTicketForm,{selectedCourse:props.selectedCourse,onPress:closeTicketEditForm,selectedTicket:props.selectedTicket,rerender:closeTicketEditForm}),editTicketForm&&props.selectedCourse!==null&&Number(props.selectedTicket.author.id)!==Number(props.userData.id)&&/*#__PURE__*/_jsx(\"div\",{className:classes.noEditRights,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.noEditRights_inner,children:[\"Only creaters have edit rights!!\",/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:classes.noEditButton,onClick:closeTicketEditForm,children:\"Yes, I understand!\"})]})}),commentObj===null&&/*#__PURE__*/_jsx(\"div\",{className:classes.ticketNotSelectedPage,children:\"Please choose a discussion to continue\"}),commentObj!==null&&/*#__PURE__*/_jsxs(\"div\",{className:classes.ticketViewWindowContainer,children:[/*#__PURE__*/_jsx(TicketInfo,{ticketId:ticketId,data:props.selectedTicket}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:classes.ticketEditButton,onClick:showTicketEditFormHandler,children:\" Edit\"}),/*#__PURE__*/_jsx(TicketDescription,{ticketId:ticketId,data:props.selectedTicket}),commentObj.map(function(comment,index){return/*#__PURE__*/_jsx(TicketComments,{commenttext:comment.commenttext,commenter:comment.commenter,commenttime:comment.commenttime},index);}),/*#__PURE__*/_jsx(AddComment,{ticketId:ticketId,newCommentAdded:setComAdded})]})]});};export default TicketViewWindow;","map":null,"metadata":{},"sourceType":"module"}