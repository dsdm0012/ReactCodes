{"ast":null,"code":"import _slicedToArray from\"/home/bibhu/EDRdevelopment/DevBranch/edresearchweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import classes from'./OnePresentation.module.css';import{BiEdit}from'react-icons/bi';import{BsBoxArrowUpRight,BsUpload,BsTrash,BsXLg,BsFileEarmarkPdf}from'react-icons/bs';import{Link}from'react-router-dom';import UploadTalkForm from'./Forms/UploadTalkForm';import EditPresentatonForm from'./Forms/EditPresentatonForm';import{deletepresentation}from'../../../../../CommonApps/AllAPICalls';//import basewebURL from '../../../../../basewebURL';\nimport{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var OnePresentation=function OnePresentation(props){var presentationid=props.presentation.id;var openFileInNewTabHandler=function openFileInNewTabHandler(_ref){var talkfilelink=_ref.talkfilelink;var fileLink=talkfilelink;window.open(fileLink,\"_blank\");};var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showFileUploadForm=_useState2[0],setShowFileUploadForm=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showEditPresentation=_useState4[0],setShowEditPresentation=_useState4[1];var showUploadFormHandler=function showUploadFormHandler(){if(props.selectedMeeting!==null&&props.userData.id!==null&&props.presentation!==null){if(Number(props.selectedMeeting.creater.id)===Number(props.userData.id)){setShowFileUploadForm(true);}else if(Number(props.presentation.speaker.id)===Number(props.userData.id)){setShowFileUploadForm(true);}else{alert(\"Only hosts or speakers can upload talks\");}}};var closeFileUploadForm=function closeFileUploadForm(){setShowFileUploadForm(false);props.rerender();};var deleteTalkHandler=function deleteTalkHandler(){var talkId=props.presentation.id;//deletepresentation({talkId});\n//window.location.reload(false)\n//props.rerender();\t\nif(props.selectedMeeting!==null&&props.userData.id!==null&&props.presentation!==null){if(Number(props.selectedMeeting.creater.id)===Number(props.userData.id)){deletepresentation({talkId:talkId});props.rerender();}else if(Number(props.presentation.speaker.id)===Number(props.userData.id)){alert(\"Only hosts can delete presentations\");}else{alert(\"Only hosts can delete presentations\");}}};var showEditPresentationHandler=function showEditPresentationHandler(){if(props.selectedMeeting!==null&&props.userData.id!==null&&props.presentation!==null){if(Number(props.selectedMeeting.creater.id)===Number(props.userData.id)){setShowEditPresentation(true);}else if(Number(props.presentation.speaker.id)===Number(props.userData.id)){setShowEditPresentation(true);}else{alert(\"Only hosts or speakers can edit presentations\");}}};var closeEditPresentation=function closeEditPresentation(){setShowEditPresentation(false);props.rerender();};return/*#__PURE__*/_jsxs(\"div\",{className:classes.onePresentation,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.onePresentation_talkTitleDiv,children:[/*#__PURE__*/_jsxs(\"i\",{children:[\" \",/*#__PURE__*/_jsxs(\"span\",{className:classes.talkID,children:[\" \",props.presentation.id,\" \"]}),/*#__PURE__*/_jsxs(\"b\",{style:{color:\"var(--themeColor)\"},children:[props.presentation.talktitle,\" \"]})]}),/*#__PURE__*/_jsxs(\"i\",{children:[\"  Speaker: \",props.presentation.speaker.firstname,\" \",props.presentation.speaker.lastname]})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.onePresentation_talkTitleDiv,children:/*#__PURE__*/_jsxs(\"span\",{style:{color:\"grey\"},children:[\" Time (IST):\",/*#__PURE__*/_jsxs(\"b\",{children:[props.presentation.talktime.split(\":\")[0],\":\",props.presentation.talktime.split(\":\")[1],\", \",props.presentation.duration,\" mins \",\" \"]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.onePresentation_talkTitleDiv,style:{color:\"grey\"},children:[/*#__PURE__*/_jsxs(\"span\",{children:[\" Attachments:\",props.presentation.talkfiles.map(function(talkfile,index){var talkfilelink=talkfile.talkfile;return/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return openFileInNewTabHandler({talkfilelink:talkfilelink});},className:classes.uploadedFile,children:[/*#__PURE__*/_jsx(BsFileEarmarkPdf,{className:classes.uploadfileIcon}),talkfilelink.split(\"?AWSAccessKeyId\")[0].split(\"/\").at(-1)]},index);}),showFileUploadForm&&/*#__PURE__*/_jsx(UploadTalkForm,{onPress:closeFileUploadForm,meeting:props.selectedMeeting,presentation:props.presentation}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:classes.addFileButton,onClick:showUploadFormHandler,children:\"+add file\"})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"button\",{className:classes.talkEditButton,type:\"button\",onClick:showEditPresentationHandler,children:[\" \",/*#__PURE__*/_jsx(BiEdit,{}),\" \"]}),/*#__PURE__*/_jsxs(\"button\",{className:classes.talkEditButton,type:\"button\",onClick:deleteTalkHandler,children:[\" \",/*#__PURE__*/_jsx(BsTrash,{}),\" \"]})]}),showEditPresentation&&/*#__PURE__*/_jsx(EditPresentatonForm,{onPress:closeEditPresentation,presentation:props.presentation})]})]});};export default OnePresentation;","map":null,"metadata":{},"sourceType":"module"}